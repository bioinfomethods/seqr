(self.webpackChunkseqr=self.webpackChunkseqr||[]).push([[854],{37345:(t,e,n)=>{"use strict";n.d(e,{oh:()=>m,Kn:()=>l.Z,eF:()=>l.D});var i=n(3839),a=n(42274),r=n(69607),o=n(5130),s=n(92992),l=n(14827),h=n(12828);function c(t){return function(){return t}}function u(t,e,n,i,a,r,o,s,l,h){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=a,this.x=r,this.y=o,this.dx=s,this.dy=l,this._=h}function d(){return!a.B.ctrlKey&&!a.B.button}function f(){return this.parentNode}function p(t){return null==t?{x:a.B.x,y:a.B.y}:t}function _(){return navigator.maxTouchPoints||"ontouchstart"in this}function m(){var t,e,n,m,y=d,g=f,x=p,v=_,b={},w=(0,i.Z)("start","drag","end"),z=0,k=0;function T(t){t.on("mousedown.drag",M).filter(v).on("touchstart.drag",N).on("touchmove.drag",O).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function M(){if(!m&&y.apply(this,arguments)){var i=B("mouse",g.apply(this,arguments),r.Z,this,arguments);i&&((0,o.Z)(a.B.view).on("mousemove.drag",E,!0).on("mouseup.drag",A,!0),(0,l.Z)(a.B.view),(0,h.r)(),n=!1,t=a.B.clientX,e=a.B.clientY,i("start"))}}function E(){if((0,h.Z)(),!n){var i=a.B.clientX-t,r=a.B.clientY-e;n=i*i+r*r>k}b.mouse("drag")}function A(){(0,o.Z)(a.B.view).on("mousemove.drag mouseup.drag",null),(0,l.D)(a.B.view,n),(0,h.Z)(),b.mouse("end")}function N(){if(y.apply(this,arguments)){var t,e,n=a.B.changedTouches,i=g.apply(this,arguments),r=n.length;for(t=0;t<r;++t)(e=B(n[t].identifier,i,s.Z,this,arguments))&&((0,h.r)(),e("start"))}}function O(){var t,e,n=a.B.changedTouches,i=n.length;for(t=0;t<i;++t)(e=b[n[t].identifier])&&((0,h.Z)(),e("drag"))}function S(){var t,e,n=a.B.changedTouches,i=n.length;for(m&&clearTimeout(m),m=setTimeout((function(){m=null}),500),t=0;t<i;++t)(e=b[n[t].identifier])&&((0,h.r)(),e("end"))}function B(t,e,n,i,r){var o,s,l,h=n(e,t),c=w.copy();if((0,a._H)(new u(T,"beforestart",o,t,z,h[0],h[1],0,0,c),(function(){return null!=(a.B.subject=o=x.apply(i,r))&&(s=o.x-h[0]||0,l=o.y-h[1]||0,!0)})))return function d(f){var p,_=h;switch(f){case"start":b[t]=d,p=z++;break;case"end":delete b[t],--z;case"drag":h=n(e,t),p=z}(0,a._H)(new u(T,f,o,t,p,h[0]+s,h[1]+l,h[0]-_[0],h[1]-_[1],c),c.apply,c,[f,i,r])}}return T.filter=function(t){return arguments.length?(y="function"==typeof t?t:c(!!t),T):y},T.container=function(t){return arguments.length?(g="function"==typeof t?t:c(t),T):g},T.subject=function(t){return arguments.length?(x="function"==typeof t?t:c(t),T):x},T.touchable=function(t){return arguments.length?(v="function"==typeof t?t:c(!!t),T):v},T.on=function(){var t=w.on.apply(w,arguments);return t===w?T:t},T.clickDistance=function(t){return arguments.length?(k=(t=+t)*t,T):Math.sqrt(k)},T}u.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t}},14827:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r,D:()=>o});var i=n(5130),a=n(12828);function r(t){var e=t.document.documentElement,n=(0,i.Z)(t).on("dragstart.drag",a.Z,!0);"onselectstart"in e?n.on("selectstart.drag",a.Z,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function o(t,e){var n=t.document.documentElement,r=(0,i.Z)(t).on("dragstart.drag",null);e&&(r.on("click.drag",a.Z,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}},12828:(t,e,n)=>{"use strict";n.d(e,{r:()=>a,Z:()=>r});var i=n(42274);function a(){i.B.stopImmediatePropagation()}function r(){i.B.preventDefault(),i.B.stopImmediatePropagation()}},47367:(t,e,n)=>{"use strict";function i(t,e){return t.parent===e.parent?1:2}function a(t,e){return t+e.x}function r(t,e){return Math.max(t,e.y)}function o(){var t=i,e=1,n=1,o=!1;function s(i){var s,l=0;i.eachAfter((function(e){var n=e.children;n?(e.x=function(t){return t.reduce(a,0)/t.length}(n),e.y=function(t){return 1+t.reduce(r,0)}(n)):(e.x=s?l+=t(e,s):0,e.y=0,s=e)}));var h=function(t){for(var e;e=t.children;)t=e[0];return t}(i),c=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(i),u=h.x-t(h,c)/2,d=c.x+t(c,h)/2;return i.eachAfter(o?function(t){t.x=(t.x-i.x)*e,t.y=(i.y-t.y)*n}:function(t){t.x=(t.x-u)/(d-u)*e,t.y=(1-(i.y?t.y/i.y:1))*n})}return s.separation=function(e){return arguments.length?(t=e,s):t},s.size=function(t){return arguments.length?(o=!1,e=+t[0],n=+t[1],s):o?null:[e,n]},s.nodeSize=function(t){return arguments.length?(o=!0,e=+t[0],n=+t[1],s):o?[e,n]:null},s}function s(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function l(t,e){var n,i,a,r,o,s=new d(t),l=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=h);n=c.pop();)if(l&&(n.value=+n.data.value),(a=e(n.data))&&(o=a.length))for(n.children=new Array(o),r=o-1;r>=0;--r)c.push(i=n.children[r]=new d(a[r])),i.parent=n,i.depth=n.depth+1;return s.eachBefore(u)}function h(t){return t.children}function c(t){t.data=t.data.data}function u(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function d(t){this.data=t,this.depth=this.height=0,this.parent=null}n.d(e,{ki:()=>o,bT:()=>l,P2:()=>I,O1:()=>p,jA:()=>E,uK:()=>q,QP:()=>j,G_:()=>J,pN:()=>nt,wL:()=>it,LQ:()=>C,eA:()=>rt,Km:()=>$,E_:()=>at,o$:()=>et}),d.prototype=l.prototype={constructor:d,count:function(){return this.eachAfter(s)},each:function(t){var e,n,i,a,r=this,o=[r];do{for(e=o.reverse(),o=[];r=e.pop();)if(t(r),n=r.children)for(i=0,a=n.length;i<a;++i)o.push(n[i])}while(o.length);return this},eachAfter:function(t){for(var e,n,i,a=this,r=[a],o=[];a=r.pop();)if(o.push(a),e=a.children)for(n=0,i=e.length;n<i;++n)r.push(e[n]);for(;a=o.pop();)t(a);return this},eachBefore:function(t){for(var e,n,i=this,a=[i];i=a.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)a.push(e[n]);return this},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,i=e.children,a=i&&i.length;--a>=0;)n+=i[a].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),a=null;t=n.pop(),e=i.pop();for(;t===e;)a=t,t=n.pop(),e=i.pop();return a}(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var a=i.length;t!==n;)i.splice(a,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each((function(e){t.push(e)})),t},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return l(this).eachBefore(c)}};var f=Array.prototype.slice;function p(t){for(var e,n,i=0,a=(t=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}(f.call(t))).length,r=[];i<a;)e=t[i],n&&y(n,e)?++i:(n=x(r=_(r,e)),i=0);return n}function _(t,e){var n,i;if(g(e,t))return[e];for(n=0;n<t.length;++n)if(m(e,t[n])&&g(v(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(m(v(t[n],t[i]),e)&&m(v(t[n],e),t[i])&&m(v(t[i],e),t[n])&&g(b(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function m(t,e){var n=t.r-e.r,i=e.x-t.x,a=e.y-t.y;return n<0||n*n<i*i+a*a}function y(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function g(t,e){for(var n=0;n<e.length;++n)if(!y(t,e[n]))return!1;return!0}function x(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return v(t[0],t[1]);case 3:return b(t[0],t[1],t[2])}var e}function v(t,e){var n=t.x,i=t.y,a=t.r,r=e.x,o=e.y,s=e.r,l=r-n,h=o-i,c=s-a,u=Math.sqrt(l*l+h*h);return{x:(n+r+l/u*c)/2,y:(i+o+h/u*c)/2,r:(u+a+s)/2}}function b(t,e,n){var i=t.x,a=t.y,r=t.r,o=e.x,s=e.y,l=e.r,h=n.x,c=n.y,u=n.r,d=i-o,f=i-h,p=a-s,_=a-c,m=l-r,y=u-r,g=i*i+a*a-r*r,x=g-o*o-s*s+l*l,v=g-h*h-c*c+u*u,b=f*p-d*_,w=(p*v-_*x)/(2*b)-i,z=(_*m-p*y)/b,k=(f*x-d*v)/(2*b)-a,T=(d*y-f*m)/b,M=z*z+T*T-1,E=2*(r+w*z+k*T),A=w*w+k*k-r*r,N=-(M?(E+Math.sqrt(E*E-4*M*A))/(2*M):A/E);return{x:i+w+z*N,y:a+k+T*N,r:N}}function w(t,e,n){var i,a,r,o,s=t.x-e.x,l=t.y-e.y,h=s*s+l*l;h?(a=e.r+n.r,a*=a,o=t.r+n.r,a>(o*=o)?(i=(h+o-a)/(2*h),r=Math.sqrt(Math.max(0,o/h-i*i)),n.x=t.x-i*s-r*l,n.y=t.y-i*l+r*s):(i=(h+a-o)/(2*h),r=Math.sqrt(Math.max(0,a/h-i*i)),n.x=e.x+i*s-r*l,n.y=e.y+i*l+r*s)):(n.x=e.x+n.r,n.y=e.y)}function z(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,a=e.y-t.y;return n>0&&n*n>i*i+a*a}function k(t){var e=t._,n=t.next._,i=e.r+n.r,a=(e.x*n.r+n.x*e.r)/i,r=(e.y*n.r+n.y*e.r)/i;return a*a+r*r}function T(t){this._=t,this.next=null,this.previous=null}function M(t){if(!(a=t.length))return 0;var e,n,i,a,r,o,s,l,h,c,u;if((e=t[0]).x=0,e.y=0,!(a>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(a>2))return e.r+n.r;w(n,e,i=t[2]),e=new T(e),n=new T(n),i=new T(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(s=3;s<a;++s){w(e._,n._,i=t[s]),i=new T(i),l=n.next,h=e.previous,c=n._.r,u=e._.r;do{if(c<=u){if(z(l._,i._)){n=l,e.next=n,n.previous=e,--s;continue t}c+=l._.r,l=l.next}else{if(z(h._,i._)){(e=h).next=n,n.previous=e,--s;continue t}u+=h._.r,h=h.previous}}while(l!==h.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,r=k(e);(i=i.next)!==n;)(o=k(i))<r&&(e=i,r=o);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=p(e),s=0;s<a;++s)(e=t[s]).x-=i.x,e.y-=i.y;return i.r}function E(t){return M(t),t}function A(t){return null==t?null:N(t)}function N(t){if("function"!=typeof t)throw new Error;return t}function O(){return 0}function S(t){return function(){return t}}function B(t){return Math.sqrt(t.value)}function I(){var t=null,e=1,n=1,i=O;function a(a){return a.x=e/2,a.y=n/2,t?a.eachBefore(F(t)).eachAfter(D(i,.5)).eachBefore(Z(1)):a.eachBefore(F(B)).eachAfter(D(O,1)).eachAfter(D(i,a.r/Math.min(e,n))).eachBefore(Z(Math.min(e,n)/(2*a.r))),a}return a.radius=function(e){return arguments.length?(t=A(e),a):t},a.size=function(t){return arguments.length?(e=+t[0],n=+t[1],a):[e,n]},a.padding=function(t){return arguments.length?(i="function"==typeof t?t:S(+t),a):i},a}function F(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function D(t,e){return function(n){if(i=n.children){var i,a,r,o=i.length,s=t(n)*e||0;if(s)for(a=0;a<o;++a)i[a].r+=s;if(r=M(i),s)for(a=0;a<o;++a)i[a].r-=s;n.r=r+s}}}function Z(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function L(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function C(t,e,n,i,a){for(var r,o=t.children,s=-1,l=o.length,h=t.value&&(i-e)/t.value;++s<l;)(r=o[s]).y0=n,r.y1=a,r.x0=e,r.x1=e+=r.value*h}function q(){var t=1,e=1,n=0,i=!1;function a(a){var r=a.height+1;return a.x0=a.y0=n,a.x1=t,a.y1=e/r,a.eachBefore(function(t,e){return function(i){i.children&&C(i,i.x0,t*(i.depth+1)/e,i.x1,t*(i.depth+2)/e);var a=i.x0,r=i.y0,o=i.x1-n,s=i.y1-n;o<a&&(a=o=(a+o)/2),s<r&&(r=s=(r+s)/2),i.x0=a,i.y0=r,i.x1=o,i.y1=s}}(e,r)),i&&a.eachBefore(L),a}return a.round=function(t){return arguments.length?(i=!!t,a):i},a.size=function(n){return arguments.length?(t=+n[0],e=+n[1],a):[t,e]},a.padding=function(t){return arguments.length?(n=+t,a):n},a}var U={depth:-1},P={};function Y(t){return t.id}function R(t){return t.parentId}function j(){var t=Y,e=R;function n(n){var i,a,r,o,s,l,h,c=n.length,f=new Array(c),p={};for(a=0;a<c;++a)i=n[a],s=f[a]=new d(i),null!=(l=t(i,a,n))&&(l+="")&&(p[h="$"+(s.id=l)]=h in p?P:s);for(a=0;a<c;++a)if(s=f[a],null!=(l=e(n[a],a,n))&&(l+="")){if(!(o=p["$"+l]))throw new Error("missing: "+l);if(o===P)throw new Error("ambiguous: "+l);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(r)throw new Error("multiple roots");r=s}if(!r)throw new Error("no root");if(r.parent=U,r.eachBefore((function(t){t.depth=t.parent.depth+1,--c})).eachBefore(u),r.parent=null,c>0)throw new Error("cycle");return r}return n.id=function(e){return arguments.length?(t=N(e),n):t},n.parentId=function(t){return arguments.length?(e=N(t),n):e},n}function H(t,e){return t.parent===e.parent?1:2}function G(t){var e=t.children;return e?e[0]:t.t}function V(t){var e=t.children;return e?e[e.length-1]:t.t}function X(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function K(t,e,n){return t.a.parent===e.parent?t.a:n}function W(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function J(){var t=H,e=1,n=1,i=null;function a(a){var l=function(t){for(var e,n,i,a,r,o=new W(t,0),s=[o];e=s.pop();)if(i=e._.children)for(e.children=new Array(r=i.length),a=r-1;a>=0;--a)s.push(n=e.children[a]=new W(i[a],a)),n.parent=e;return(o.parent=new W(null,0)).children=[o],o}(a);if(l.eachAfter(r),l.parent.m=-l.z,l.eachBefore(o),i)a.eachBefore(s);else{var h=a,c=a,u=a;a.eachBefore((function(t){t.x<h.x&&(h=t),t.x>c.x&&(c=t),t.depth>u.depth&&(u=t)}));var d=h===c?1:t(h,c)/2,f=d-h.x,p=e/(c.x+d+f),_=n/(u.depth||1);a.eachBefore((function(t){t.x=(t.x+f)*p,t.y=t.depth*_}))}return a}function r(e){var n=e.children,i=e.parent.children,a=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,a=t.children,r=a.length;--r>=0;)(e=a[r]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var r=(n[0].z+n[n.length-1].z)/2;a?(e.z=a.z+t(e._,a._),e.m=e.z-r):e.z=r}else a&&(e.z=a.z+t(e._,a._));e.parent.A=function(e,n,i){if(n){for(var a,r=e,o=e,s=n,l=r.parent.children[0],h=r.m,c=o.m,u=s.m,d=l.m;s=V(s),r=G(r),s&&r;)l=G(l),(o=V(o)).a=e,(a=s.z+u-r.z-h+t(s._,r._))>0&&(X(K(s,e,i),e,a),h+=a,c+=a),u+=s.m,h+=r.m,d+=l.m,c+=o.m;s&&!V(o)&&(o.t=s,o.m+=u-c),r&&!G(l)&&(l.t=r,l.m+=h-d,i=e)}return i}(e,a,e.parent.A||i[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*n}return a.separation=function(e){return arguments.length?(t=e,a):t},a.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],a):i?null:[e,n]},a.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],a):i?[e,n]:null},a}function $(t,e,n,i,a){for(var r,o=t.children,s=-1,l=o.length,h=t.value&&(a-n)/t.value;++s<l;)(r=o[s]).x0=e,r.x1=i,r.y0=n,r.y1=n+=r.value*h}W.prototype=Object.create(d.prototype);var Q=(1+Math.sqrt(5))/2;function tt(t,e,n,i,a,r){for(var o,s,l,h,c,u,d,f,p,_,m,y=[],g=e.children,x=0,v=0,b=g.length,w=e.value;x<b;){l=a-n,h=r-i;do{c=g[v++].value}while(!c&&v<b);for(u=d=c,m=c*c*(_=Math.max(h/l,l/h)/(w*t)),p=Math.max(d/m,m/u);v<b;++v){if(c+=s=g[v].value,s<u&&(u=s),s>d&&(d=s),m=c*c*_,(f=Math.max(d/m,m/u))>p){c-=s;break}p=f}y.push(o={value:c,dice:l<h,children:g.slice(x,v)}),o.dice?C(o,n,i,a,w?i+=h*c/w:r):$(o,n,i,w?n+=l*c/w:a,r),w-=c,x=v}return y}const et=function t(e){function n(t,n,i,a,r){tt(e,t,n,i,a,r)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Q);function nt(){var t=et,e=!1,n=1,i=1,a=[0],r=O,o=O,s=O,l=O,h=O;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(u),a=[0],e&&t.eachBefore(L),t}function u(e){var n=a[e.depth],i=e.x0+n,c=e.y0+n,u=e.x1-n,d=e.y1-n;u<i&&(i=u=(i+u)/2),d<c&&(c=d=(c+d)/2),e.x0=i,e.y0=c,e.x1=u,e.y1=d,e.children&&(n=a[e.depth+1]=r(e)/2,i+=h(e)-n,c+=o(e)-n,(u-=s(e)-n)<i&&(i=u=(i+u)/2),(d-=l(e)-n)<c&&(c=d=(c+d)/2),t(e,i,c,u,d))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],i=+t[1],c):[n,i]},c.tile=function(e){return arguments.length?(t=N(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(r="function"==typeof t?t:S(+t),c):r},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:S(+t),c):o},c.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:S(+t),c):s},c.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:S(+t),c):l},c.paddingLeft=function(t){return arguments.length?(h="function"==typeof t?t:S(+t),c):h},c}function it(t,e,n,i,a){var r,o,s=t.children,l=s.length,h=new Array(l+1);for(h[0]=o=r=0;r<l;++r)h[r+1]=o+=s[r].value;!function t(e,n,i,a,r,o,l){if(e>=n-1){var c=s[e];return c.x0=a,c.y0=r,c.x1=o,void(c.y1=l)}var u=h[e],d=i/2+u,f=e+1,p=n-1;for(;f<p;){var _=f+p>>>1;h[_]<d?f=_+1:p=_}d-h[f-1]<h[f]-d&&e+1<f&&--f;var m=h[f]-u,y=i-m;if(o-a>l-r){var g=(a*y+o*m)/i;t(e,f,m,a,r,g,l),t(f,n,y,g,r,o,l)}else{var x=(r*y+l*m)/i;t(e,f,m,a,r,o,x),t(f,n,y,a,x,o,l)}}(0,l,t.value,e,n,i,a)}function at(t,e,n,i,a){(1&t.depth?$:C)(t,e,n,i,a)}const rt=function t(e){function n(t,n,i,a,r){if((o=t._squarify)&&o.ratio===e)for(var o,s,l,h,c,u=-1,d=o.length,f=t.value;++u<d;){for(l=(s=o[u]).children,h=s.value=0,c=l.length;h<c;++h)s.value+=l[h].value;s.dice?C(s,n,i,a,i+=(r-i)*s.value/f):$(s,n,i,n+=(a-n)*s.value/f,r),f-=s.value}else t._squarify=o=tt(e,t,n,i,a,r),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Q)},56164:(t,e,n)=>{"use strict";n.d(e,{Eb:()=>f.Z,Ue:()=>r,Du:()=>i.Z,_H:()=>z._H,B:()=>z.B,I_:()=>s,C2:()=>h.Z,Jz:()=>c.Z,uD:()=>u.Z,aC:()=>d.Z,Ys:()=>a.Z,td:()=>p.Z,f_:()=>_.ZP,nZ:()=>m.Z,UK:()=>y.Z,oB:()=>g.S,Fq:()=>x.Z,W4:()=>b,u9:()=>w.Z});var i=n(35e3),a=n(5130);function r(t){return(0,a.Z)((0,i.Z)(t).call(document.documentElement))}var o=0;function s(){return new l}function l(){this._="@"+(++o).toString(36)}l.prototype=s.prototype={constructor:l,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var h=n(40597),c=n(69607),u=n(60447),d=n(19030),f=n(47882),p=n(56070),_=n(73078),m=n(86408),y=n(43912),g=n(40721),x=n(92992),v=n(98861);function b(t,e){null==e&&(e=(0,v.Z)().touches);for(var n=0,i=e?e.length:0,a=new Array(i);n<i;++n)a[n]=(0,f.Z)(t,e[n]);return a}var w=n(58414),z=n(42274)},60508:(t,e,n)=>{"use strict";n.d(e,{Nb:()=>T,SO:()=>M.Z,am:()=>L,$0:()=>gt,Dt:()=>vt,WQ:()=>wt,tF:()=>kt,YY:()=>Et,Ov:()=>Nt,dC:()=>St,zg:()=>Ft,fG:()=>Zt,$m:()=>Ct,c_:()=>S.Z,fx:()=>Ut,Fd:()=>Xt,ak:()=>Kt,Sx:()=>$t,eA:()=>te,js:()=>ne,iJ:()=>ee,jv:()=>E.Z,XB:()=>Z,h5:()=>V,M4:()=>K,rR:()=>X,ve:()=>O,Hs:()=>C,N1:()=>L,aJ:()=>Z,kn:()=>oe,W$:()=>le,pB:()=>se,HL:()=>ie,Ku:()=>he,YG:()=>ce,mG:()=>ue,$K:()=>fe,IX:()=>_e,FP:()=>me,Qx:()=>ae,cY:()=>ye,NA:()=>pt,JF:()=>W,tJ:()=>J,rZ:()=>tt,m_:()=>rt,Hm:()=>at,P6:()=>st,n3:()=>dt,uH:()=>ft});var i=n(52508),a=n(56297),r=Math.abs,o=Math.atan2,s=Math.cos,l=Math.max,h=Math.min,c=Math.sin,u=Math.sqrt,d=1e-12,f=Math.PI,p=f/2,_=2*f;function m(t){return t>1?0:t<-1?f:Math.acos(t)}function y(t){return t>=1?p:t<=-1?-p:Math.asin(t)}function g(t){return t.innerRadius}function x(t){return t.outerRadius}function v(t){return t.startAngle}function b(t){return t.endAngle}function w(t){return t&&t.padAngle}function z(t,e,n,i,a,r,o,s){var l=n-t,h=i-e,c=o-a,u=s-r,f=u*l-c*h;if(!(f*f<d))return[t+(f=(c*(e-r)-u*(t-a))/f)*l,e+f*h]}function k(t,e,n,i,a,r,o){var s=t-n,h=e-i,c=(o?r:-r)/u(s*s+h*h),d=c*h,f=-c*s,p=t+d,_=e+f,m=n+d,y=i+f,g=(p+m)/2,x=(_+y)/2,v=m-p,b=y-_,w=v*v+b*b,z=a-r,k=p*y-m*_,T=(b<0?-1:1)*u(l(0,z*z*w-k*k)),M=(k*b-v*T)/w,E=(-k*v-b*T)/w,A=(k*b+v*T)/w,N=(-k*v+b*T)/w,O=M-g,S=E-x,B=A-g,I=N-x;return O*O+S*S>B*B+I*I&&(M=A,E=N),{cx:M,cy:E,x01:-d,y01:-f,x11:M*(a/z-1),y11:E*(a/z-1)}}function T(){var t=g,e=x,n=(0,a.Z)(0),l=null,T=v,M=b,E=w,A=null;function N(){var a,g,x=+t.apply(this,arguments),v=+e.apply(this,arguments),b=T.apply(this,arguments)-p,w=M.apply(this,arguments)-p,N=r(w-b),O=w>b;if(A||(A=a=(0,i.Z)()),v<x&&(g=v,v=x,x=g),v>d)if(N>_-d)A.moveTo(v*s(b),v*c(b)),A.arc(0,0,v,b,w,!O),x>d&&(A.moveTo(x*s(w),x*c(w)),A.arc(0,0,x,w,b,O));else{var S,B,I=b,F=w,D=b,Z=w,L=N,C=N,q=E.apply(this,arguments)/2,U=q>d&&(l?+l.apply(this,arguments):u(x*x+v*v)),P=h(r(v-x)/2,+n.apply(this,arguments)),Y=P,R=P;if(U>d){var j=y(U/x*c(q)),H=y(U/v*c(q));(L-=2*j)>d?(D+=j*=O?1:-1,Z-=j):(L=0,D=Z=(b+w)/2),(C-=2*H)>d?(I+=H*=O?1:-1,F-=H):(C=0,I=F=(b+w)/2)}var G=v*s(I),V=v*c(I),X=x*s(Z),K=x*c(Z);if(P>d){var W,J=v*s(F),$=v*c(F),Q=x*s(D),tt=x*c(D);if(N<f&&(W=z(G,V,Q,tt,J,$,X,K))){var et=G-W[0],nt=V-W[1],it=J-W[0],at=$-W[1],rt=1/c(m((et*it+nt*at)/(u(et*et+nt*nt)*u(it*it+at*at)))/2),ot=u(W[0]*W[0]+W[1]*W[1]);Y=h(P,(x-ot)/(rt-1)),R=h(P,(v-ot)/(rt+1))}}C>d?R>d?(S=k(Q,tt,G,V,v,R,O),B=k(J,$,X,K,v,R,O),A.moveTo(S.cx+S.x01,S.cy+S.y01),R<P?A.arc(S.cx,S.cy,R,o(S.y01,S.x01),o(B.y01,B.x01),!O):(A.arc(S.cx,S.cy,R,o(S.y01,S.x01),o(S.y11,S.x11),!O),A.arc(0,0,v,o(S.cy+S.y11,S.cx+S.x11),o(B.cy+B.y11,B.cx+B.x11),!O),A.arc(B.cx,B.cy,R,o(B.y11,B.x11),o(B.y01,B.x01),!O))):(A.moveTo(G,V),A.arc(0,0,v,I,F,!O)):A.moveTo(G,V),x>d&&L>d?Y>d?(S=k(X,K,J,$,x,-Y,O),B=k(G,V,Q,tt,x,-Y,O),A.lineTo(S.cx+S.x01,S.cy+S.y01),Y<P?A.arc(S.cx,S.cy,Y,o(S.y01,S.x01),o(B.y01,B.x01),!O):(A.arc(S.cx,S.cy,Y,o(S.y01,S.x01),o(S.y11,S.x11),!O),A.arc(0,0,x,o(S.cy+S.y11,S.cx+S.x11),o(B.cy+B.y11,B.cx+B.x11),O),A.arc(B.cx,B.cy,Y,o(B.y11,B.x11),o(B.y01,B.x01),!O))):A.arc(0,0,x,Z,D,O):A.lineTo(X,K)}else A.moveTo(0,0);if(A.closePath(),a)return A=null,a+""||null}return N.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+T.apply(this,arguments)+ +M.apply(this,arguments))/2-f/2;return[s(i)*n,c(i)*n]},N.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:(0,a.Z)(+e),N):t},N.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:(0,a.Z)(+t),N):e},N.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:(0,a.Z)(+t),N):n},N.padRadius=function(t){return arguments.length?(l=null==t?null:"function"==typeof t?t:(0,a.Z)(+t),N):l},N.startAngle=function(t){return arguments.length?(T="function"==typeof t?t:(0,a.Z)(+t),N):T},N.endAngle=function(t){return arguments.length?(M="function"==typeof t?t:(0,a.Z)(+t),N):M},N.padAngle=function(t){return arguments.length?(E="function"==typeof t?t:(0,a.Z)(+t),N):E},N.context=function(t){return arguments.length?(A=null==t?null:t,N):A},N}var M=n(45902),E=n(23780);function A(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function N(t){return t}function O(){var t=N,e=A,n=null,i=(0,a.Z)(0),r=(0,a.Z)(_),o=(0,a.Z)(0);function s(a){var s,l,h,c,u,d=a.length,f=0,p=new Array(d),m=new Array(d),y=+i.apply(this,arguments),g=Math.min(_,Math.max(-_,r.apply(this,arguments)-y)),x=Math.min(Math.abs(g)/d,o.apply(this,arguments)),v=x*(g<0?-1:1);for(s=0;s<d;++s)(u=m[p[s]=s]=+t(a[s],s,a))>0&&(f+=u);for(null!=e?p.sort((function(t,n){return e(m[t],m[n])})):null!=n&&p.sort((function(t,e){return n(a[t],a[e])})),s=0,h=f?(g-d*v)/f:0;s<d;++s,y=c)l=p[s],c=y+((u=m[l])>0?u*h:0)+v,m[l]={data:a[l],index:s,value:u,startAngle:y,endAngle:c,padAngle:x};return m}return s.value=function(e){return arguments.length?(t="function"==typeof e?e:(0,a.Z)(+e),s):t},s.sortValues=function(t){return arguments.length?(e=t,n=null,s):e},s.sort=function(t){return arguments.length?(n=t,e=null,s):n},s.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:(0,a.Z)(+t),s):i},s.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:(0,a.Z)(+t),s):r},s.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:(0,a.Z)(+t),s):o},s}var S=n(41545),B=F(S.Z);function I(t){this._curve=t}function F(t){function e(e){return new I(t(e))}return e._curve=t,e}function D(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(F(t)):e()._curve},t}function Z(){return D((0,E.Z)().curve(B))}function L(){var t=(0,M.Z)().curve(B),e=t.curve,n=t.lineX0,i=t.lineX1,a=t.lineY0,r=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return D(n())},delete t.lineX0,t.lineEndAngle=function(){return D(i())},delete t.lineX1,t.lineInnerRadius=function(){return D(a())},delete t.lineY0,t.lineOuterRadius=function(){return D(r())},delete t.lineY1,t.curve=function(t){return arguments.length?e(F(t)):e()._curve},t}function C(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}I.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var q=Array.prototype.slice,U=n(32337);function P(t){return t.source}function Y(t){return t.target}function R(t){var e=P,n=Y,r=U.x,o=U.y,s=null;function l(){var a,l=q.call(arguments),h=e.apply(this,l),c=n.apply(this,l);if(s||(s=a=(0,i.Z)()),t(s,+r.apply(this,(l[0]=h,l)),+o.apply(this,l),+r.apply(this,(l[0]=c,l)),+o.apply(this,l)),a)return s=null,a+""||null}return l.source=function(t){return arguments.length?(e=t,l):e},l.target=function(t){return arguments.length?(n=t,l):n},l.x=function(t){return arguments.length?(r="function"==typeof t?t:(0,a.Z)(+t),l):r},l.y=function(t){return arguments.length?(o="function"==typeof t?t:(0,a.Z)(+t),l):o},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l}function j(t,e,n,i,a){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,a,i,a)}function H(t,e,n,i,a){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+a)/2,i,n,i,a)}function G(t,e,n,i,a){var r=C(e,n),o=C(e,n=(n+a)/2),s=C(i,n),l=C(i,a);t.moveTo(r[0],r[1]),t.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}function V(){return R(j)}function X(){return R(H)}function K(){var t=R(G);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const W={draw:function(t,e){var n=Math.sqrt(e/f);t.moveTo(n,0),t.arc(0,0,n,0,_)}},J={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var $=Math.sqrt(1/3),Q=2*$;const tt={draw:function(t,e){var n=Math.sqrt(e/Q),i=n*$;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}};var et=Math.sin(f/10)/Math.sin(7*f/10),nt=Math.sin(_/10)*et,it=-Math.cos(_/10)*et;const at={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=nt*n,a=it*n;t.moveTo(0,-n),t.lineTo(i,a);for(var r=1;r<5;++r){var o=_*r/5,s=Math.cos(o),l=Math.sin(o);t.lineTo(l*n,-s*n),t.lineTo(s*i-l*a,l*i+s*a)}t.closePath()}},rt={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}};var ot=Math.sqrt(3);const st={draw:function(t,e){var n=-Math.sqrt(e/(3*ot));t.moveTo(0,2*n),t.lineTo(-ot*n,-n),t.lineTo(ot*n,-n),t.closePath()}};var lt=-.5,ht=Math.sqrt(3)/2,ct=1/Math.sqrt(12),ut=3*(ct/2+1);const dt={draw:function(t,e){var n=Math.sqrt(e/ut),i=n/2,a=n*ct,r=i,o=n*ct+n,s=-r,l=o;t.moveTo(i,a),t.lineTo(r,o),t.lineTo(s,l),t.lineTo(lt*i-ht*a,ht*i+lt*a),t.lineTo(lt*r-ht*o,ht*r+lt*o),t.lineTo(lt*s-ht*l,ht*s+lt*l),t.lineTo(lt*i+ht*a,lt*a-ht*i),t.lineTo(lt*r+ht*o,lt*o-ht*r),t.lineTo(lt*s+ht*l,lt*l-ht*s),t.closePath()}};var ft=[W,J,tt,rt,at,st,dt];function pt(){var t=(0,a.Z)(W),e=(0,a.Z)(64),n=null;function r(){var a;if(n||(n=a=(0,i.Z)()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:(0,a.Z)(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:(0,a.Z)(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}function _t(){}function mt(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function yt(t){this._context=t}function gt(t){return new yt(t)}function xt(t){this._context=t}function vt(t){return new xt(t)}function bt(t){this._context=t}function wt(t){return new bt(t)}function zt(t,e){this._basis=new yt(t),this._beta=e}yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},xt.prototype={areaStart:_t,areaEnd:_t,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:mt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:mt(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},zt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,a=t[0],r=e[0],o=t[n]-a,s=e[n]-r,l=-1;++l<=n;)i=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(a+i*o),this._beta*e[l]+(1-this._beta)*(r+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const kt=function t(e){function n(t){return 1===e?new yt(t):new zt(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Tt(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Mt(t,e){this._context=t,this._k=(1-e)/6}Mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Tt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Tt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Et=function t(e){function n(t){return new Mt(t,e)}return n.tension=function(e){return t(+e)},n}(0);function At(t,e){this._context=t,this._k=(1-e)/6}At.prototype={areaStart:_t,areaEnd:_t,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Tt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Nt=function t(e){function n(t){return new At(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ot(t,e){this._context=t,this._k=(1-e)/6}Ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Tt(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const St=function t(e){function n(t){return new Ot(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Bt(t,e,n){var i=t._x1,a=t._y1,r=t._x2,o=t._y2;if(t._l01_a>d){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,a=(a*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>d){var h=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*h+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*h+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,a,r,o,t._x2,t._y2)}function It(t,e){this._context=t,this._alpha=e}It.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Bt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ft=function t(e){function n(t){return e?new It(t,e):new Mt(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Dt(t,e){this._context=t,this._alpha=e}Dt.prototype={areaStart:_t,areaEnd:_t,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Bt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Zt=function t(e){function n(t){return e?new Dt(t,e):new At(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Lt(t,e){this._context=t,this._alpha=e}Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Bt(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ct=function t(e){function n(t){return e?new Lt(t,e):new Ot(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function qt(t){this._context=t}function Ut(t){return new qt(t)}function Pt(t){return t<0?-1:1}function Yt(t,e,n){var i=t._x1-t._x0,a=e-t._x1,r=(t._y1-t._y0)/(i||a<0&&-0),o=(n-t._y1)/(a||i<0&&-0),s=(r*a+o*i)/(i+a);return(Pt(r)+Pt(o))*Math.min(Math.abs(r),Math.abs(o),.5*Math.abs(s))||0}function Rt(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function jt(t,e,n){var i=t._x0,a=t._y0,r=t._x1,o=t._y1,s=(r-i)/3;t._context.bezierCurveTo(i+s,a+s*e,r-s,o-s*n,r,o)}function Ht(t){this._context=t}function Gt(t){this._context=new Vt(t)}function Vt(t){this._context=t}function Xt(t){return new Ht(t)}function Kt(t){return new Gt(t)}function Wt(t){this._context=t}function Jt(t){var e,n,i=t.length-1,a=new Array(i),r=new Array(i),o=new Array(i);for(a[0]=0,r[0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)a[e]=1,r[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[i-1]=2,r[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=a[e]/r[e-1],r[e]-=n,o[e]-=n*o[e-1];for(a[i-1]=o[i-1]/r[i-1],e=i-2;e>=0;--e)a[e]=(o[e]-a[e+1])/r[e];for(r[i-1]=(t[i]+a[i-1])/2,e=0;e<i-1;++e)r[e]=2*t[e+1]-a[e+1];return[a,r]}function $t(t){return new Wt(t)}function Qt(t,e){this._context=t,this._t=e}function te(t){return new Qt(t,.5)}function ee(t){return new Qt(t,0)}function ne(t){return new Qt(t,1)}function ie(t,e){if((a=t.length)>1)for(var n,i,a,r=1,o=t[e[0]],s=o.length;r<a;++r)for(i=o,o=t[e[r]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function ae(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function re(t,e){return t[e]}function oe(){var t=(0,a.Z)([]),e=ae,n=ie,i=re;function r(a){var r,o,s=t.apply(this,arguments),l=a.length,h=s.length,c=new Array(h);for(r=0;r<h;++r){for(var u,d=s[r],f=c[r]=new Array(l),p=0;p<l;++p)f[p]=u=[0,+i(a[p],d,p,a)],u.data=a[p];f.key=d}for(r=0,o=e(c);r<h;++r)c[o[r]].index=r;return n(c,o),c}return r.keys=function(e){return arguments.length?(t="function"==typeof e?e:(0,a.Z)(q.call(e)),r):t},r.value=function(t){return arguments.length?(i="function"==typeof t?t:(0,a.Z)(+t),r):i},r.order=function(t){return arguments.length?(e=null==t?ae:"function"==typeof t?t:(0,a.Z)(q.call(t)),r):e},r.offset=function(t){return arguments.length?(n=null==t?ie:t,r):n},r}function se(t,e){if((i=t.length)>0){for(var n,i,a,r=0,o=t[0].length;r<o;++r){for(a=n=0;n<i;++n)a+=t[n][r][1]||0;if(a)for(n=0;n<i;++n)t[n][r][1]/=a}ie(t,e)}}function le(t,e){if((s=t.length)>0)for(var n,i,a,r,o,s,l=0,h=t[e[0]].length;l<h;++l)for(r=o=0,n=0;n<s;++n)(a=(i=t[e[n]][l])[1]-i[0])>0?(i[0]=r,i[1]=r+=a):a<0?(i[1]=o,i[0]=o+=a):(i[0]=0,i[1]=a)}function he(t,e){if((n=t.length)>0){for(var n,i=0,a=t[e[0]],r=a.length;i<r;++i){for(var o=0,s=0;o<n;++o)s+=t[o][i][1]||0;a[i][1]+=a[i][0]=-s/2}ie(t,e)}}function ce(t,e){if((a=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,a,r=0,o=1;o<i;++o){for(var s=0,l=0,h=0;s<a;++s){for(var c=t[e[s]],u=c[o][1]||0,d=(u-(c[o-1][1]||0))/2,f=0;f<s;++f){var p=t[e[f]];d+=(p[o][1]||0)-(p[o-1][1]||0)}l+=u,h+=d*u}n[o-1][1]+=n[o-1][0]=r,l&&(r-=h/l)}n[o-1][1]+=n[o-1][0]=r,ie(t,e)}}function ue(t){var e=t.map(de);return ae(t).sort((function(t,n){return e[t]-e[n]}))}function de(t){for(var e,n=-1,i=0,a=t.length,r=-1/0;++n<a;)(e=+t[n][1])>r&&(r=e,i=n);return i}function fe(t){var e=t.map(pe);return ae(t).sort((function(t,n){return e[t]-e[n]}))}function pe(t){for(var e,n=0,i=-1,a=t.length;++i<a;)(e=+t[i][1])&&(n+=e);return n}function _e(t){return fe(t).reverse()}function me(t){var e,n,i=t.length,a=t.map(pe),r=ue(t),o=0,s=0,l=[],h=[];for(e=0;e<i;++e)n=r[e],o<s?(o+=a[n],l.push(n)):(s+=a[n],h.push(n));return h.reverse().concat(l)}function ye(t){return ae(t).reverse()}qt.prototype={areaStart:_t,areaEnd:_t,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:jt(this,this._t0,Rt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,jt(this,Rt(this,n=Yt(this,t,e)),n);break;default:jt(this,this._t0,n=Yt(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Gt.prototype=Object.create(Ht.prototype)).point=function(t,e){Ht.prototype.point.call(this,e,t)},Vt.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,a,r){this._context.bezierCurveTo(e,t,i,n,r,a)}},Wt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Jt(t),a=Jt(e),r=0,o=1;o<n;++r,++o)this._context.bezierCurveTo(i[0][r],a[0][r],i[1][r],a[1][r],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}}},66842:(t,e,n)=>{"use strict";n.d(e,{sP:()=>M,CR:()=>m,P2:()=>y});var i=n(3839),a=n(14827),r=Math.SQRT2;function o(t){return((t=Math.exp(t))+1/t)/2}function s(t,e){var n,i,a=t[0],s=t[1],l=t[2],h=e[0],c=e[1],u=e[2],d=h-a,f=c-s,p=d*d+f*f;if(p<1e-12)i=Math.log(u/l)/r,n=function(t){return[a+t*d,s+t*f,l*Math.exp(r*t*i)]};else{var _=Math.sqrt(p),m=(u*u-l*l+4*p)/(2*l*2*_),y=(u*u-l*l-4*p)/(2*u*2*_),g=Math.log(Math.sqrt(m*m+1)-m),x=Math.log(Math.sqrt(y*y+1)-y);i=(x-g)/r,n=function(t){var e,n=t*i,h=o(g),c=l/(2*_)*(h*(e=r*n+g,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[a+c*d,s+c*f,l*h/o(r*n+g)]}}return n.duration=1e3*i,n}var l=n(42274),h=n(69607),c=n(5130),u=n(92992),d=n(47306);function f(t){return function(){return t}}function p(t,e,n){this.target=t,this.type=e,this.transform=n}function _(t,e,n){this.k=t,this.x=e,this.y=n}_.prototype={constructor:_,scale:function(t){return 1===t?this:new _(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new _(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var m=new _(1,0,0);function y(t){for(;!t.__zoom;)if(!(t=t.parentNode))return m;return t.__zoom}function g(){l.B.stopImmediatePropagation()}function x(){l.B.preventDefault(),l.B.stopImmediatePropagation()}function v(){return!l.B.ctrlKey&&!l.B.button}function b(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function w(){return this.__zoom||m}function z(){return-l.B.deltaY*(1===l.B.deltaMode?.05:l.B.deltaMode?1:.002)}function k(){return navigator.maxTouchPoints||"ontouchstart"in this}function T(t,e,n){var i=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],r=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a),o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o))}function M(){var t,e,n=v,r=b,o=T,y=z,M=k,E=[0,1/0],A=[[-1/0,-1/0],[1/0,1/0]],N=250,O=s,S=(0,i.Z)("start","zoom","end"),B=500,I=0;function F(t){t.property("__zoom",w).on("wheel.zoom",P).on("mousedown.zoom",Y).on("dblclick.zoom",R).filter(M).on("touchstart.zoom",j).on("touchmove.zoom",H).on("touchend.zoom touchcancel.zoom",G).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function D(t,e){return(e=Math.max(E[0],Math.min(E[1],e)))===t.k?t:new _(e,t.x,t.y)}function Z(t,e,n){var i=e[0]-n[0]*t.k,a=e[1]-n[1]*t.k;return i===t.x&&a===t.y?t:new _(t.k,i,a)}function L(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function C(t,e,n){t.on("start.zoom",(function(){q(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){q(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,a=q(t,i),o=r.apply(t,i),s=null==n?L(o):"function"==typeof n?n.apply(t,i):n,l=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),h=t.__zoom,c="function"==typeof e?e.apply(t,i):e,u=O(h.invert(s).concat(l/h.k),c.invert(s).concat(l/c.k));return function(t){if(1===t)t=c;else{var e=u(t),n=l/e[2];t=new _(n,s[0]-e[0]*n,s[1]-e[1]*n)}a.zoom(null,t)}}))}function q(t,e,n){return!n&&t.__zooming||new U(t,e)}function U(t,e){this.that=t,this.args=e,this.active=0,this.extent=r.apply(t,e),this.taps=0}function P(){if(n.apply(this,arguments)){var t=q(this,arguments),e=this.__zoom,i=Math.max(E[0],Math.min(E[1],e.k*Math.pow(2,y.apply(this,arguments)))),a=(0,h.Z)(this);if(t.wheel)t.mouse[0][0]===a[0]&&t.mouse[0][1]===a[1]||(t.mouse[1]=e.invert(t.mouse[0]=a)),clearTimeout(t.wheel);else{if(e.k===i)return;t.mouse=[a,e.invert(a)],(0,d.e1)(this),t.start()}x(),t.wheel=setTimeout(r,150),t.zoom("mouse",o(Z(D(e,i),t.mouse[0],t.mouse[1]),t.extent,A))}function r(){t.wheel=null,t.end()}}function Y(){if(!e&&n.apply(this,arguments)){var t=q(this,arguments,!0),i=(0,c.Z)(l.B.view).on("mousemove.zoom",f,!0).on("mouseup.zoom",p,!0),r=(0,h.Z)(this),s=l.B.clientX,u=l.B.clientY;(0,a.Z)(l.B.view),g(),t.mouse=[r,this.__zoom.invert(r)],(0,d.e1)(this),t.start()}function f(){if(x(),!t.moved){var e=l.B.clientX-s,n=l.B.clientY-u;t.moved=e*e+n*n>I}t.zoom("mouse",o(Z(t.that.__zoom,t.mouse[0]=(0,h.Z)(t.that),t.mouse[1]),t.extent,A))}function p(){i.on("mousemove.zoom mouseup.zoom",null),(0,a.D)(l.B.view,t.moved),x(),t.end()}}function R(){if(n.apply(this,arguments)){var t=this.__zoom,e=(0,h.Z)(this),i=t.invert(e),a=t.k*(l.B.shiftKey?.5:2),s=o(Z(D(t,a),e,i),r.apply(this,arguments),A);x(),N>0?(0,c.Z)(this).transition().duration(N).call(C,s,e):(0,c.Z)(this).call(F.transform,s)}}function j(){if(n.apply(this,arguments)){var e,i,a,r,o=l.B.touches,s=o.length,h=q(this,arguments,l.B.changedTouches.length===s);for(g(),i=0;i<s;++i)a=o[i],r=[r=(0,u.Z)(this,o,a.identifier),this.__zoom.invert(r),a.identifier],h.touch0?h.touch1||h.touch0[2]===r[2]||(h.touch1=r,h.taps=0):(h.touch0=r,e=!0,h.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(h.taps<2&&(t=setTimeout((function(){t=null}),B)),(0,d.e1)(this),h.start())}}function H(){if(this.__zooming){var e,n,i,a,r=q(this,arguments),s=l.B.changedTouches,h=s.length;for(x(),t&&(t=clearTimeout(t)),r.taps=0,e=0;e<h;++e)n=s[e],i=(0,u.Z)(this,s,n.identifier),r.touch0&&r.touch0[2]===n.identifier?r.touch0[0]=i:r.touch1&&r.touch1[2]===n.identifier&&(r.touch1[0]=i);if(n=r.that.__zoom,r.touch1){var c=r.touch0[0],d=r.touch0[1],f=r.touch1[0],p=r.touch1[1],_=(_=f[0]-c[0])*_+(_=f[1]-c[1])*_,m=(m=p[0]-d[0])*m+(m=p[1]-d[1])*m;n=D(n,Math.sqrt(_/m)),i=[(c[0]+f[0])/2,(c[1]+f[1])/2],a=[(d[0]+p[0])/2,(d[1]+p[1])/2]}else{if(!r.touch0)return;i=r.touch0[0],a=r.touch0[1]}r.zoom("touch",o(Z(n,i,a),r.extent,A))}}function G(){if(this.__zooming){var t,n,i=q(this,arguments),a=l.B.changedTouches,r=a.length;for(g(),e&&clearTimeout(e),e=setTimeout((function(){e=null}),B),t=0;t<r;++t)n=a[t],i.touch0&&i.touch0[2]===n.identifier?delete i.touch0:i.touch1&&i.touch1[2]===n.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps){var o=(0,c.Z)(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return F.transform=function(t,e,n){var i=t.selection?t.selection():t;i.property("__zoom",w),t!==i?C(t,e,n):i.interrupt().each((function(){q(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},F.scaleBy=function(t,e,n){F.scaleTo(t,(function(){var t=this.__zoom.k,n="function"==typeof e?e.apply(this,arguments):e;return t*n}),n)},F.scaleTo=function(t,e,n){F.transform(t,(function(){var t=r.apply(this,arguments),i=this.__zoom,a=null==n?L(t):"function"==typeof n?n.apply(this,arguments):n,s=i.invert(a),l="function"==typeof e?e.apply(this,arguments):e;return o(Z(D(i,l),a,s),t,A)}),n)},F.translateBy=function(t,e,n){F.transform(t,(function(){return o(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),A)}))},F.translateTo=function(t,e,n,i){F.transform(t,(function(){var t=r.apply(this,arguments),a=this.__zoom,s=null==i?L(t):"function"==typeof i?i.apply(this,arguments):i;return o(m.translate(s[0],s[1]).scale(a.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,A)}),i)},U.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){(0,l._H)(new p(F,t,this.that.__zoom),S.apply,S,[t,this.that,this.args])}},F.wheelDelta=function(t){return arguments.length?(y="function"==typeof t?t:f(+t),F):y},F.filter=function(t){return arguments.length?(n="function"==typeof t?t:f(!!t),F):n},F.touchable=function(t){return arguments.length?(M="function"==typeof t?t:f(!!t),F):M},F.extent=function(t){return arguments.length?(r="function"==typeof t?t:f([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),F):r},F.scaleExtent=function(t){return arguments.length?(E[0]=+t[0],E[1]=+t[1],F):[E[0],E[1]]},F.translateExtent=function(t){return arguments.length?(A[0][0]=+t[0][0],A[1][0]=+t[1][0],A[0][1]=+t[0][1],A[1][1]=+t[1][1],F):[[A[0][0],A[0][1]],[A[1][0],A[1][1]]]},F.constrain=function(t){return arguments.length?(o=t,F):o},F.duration=function(t){return arguments.length?(N=+t,F):N},F.interpolate=function(t){return arguments.length?(O=t,F):O},F.on=function(){var t=S.on.apply(S,arguments);return t===S?F:t},F.clickDistance=function(t){return arguments.length?(I=(t=+t)*t,F):Math.sqrt(I)},F}y.prototype=_.prototype},10527:(t,e,n)=>{"use strict";n.d(e,{IH:()=>d,PI:()=>p});var i=n(91843),a=n(56327),r=n(85516),o=n(6939);let s={breast_cancer:"breast_cancer_diagnosis_age",breast_cancer2:"breast_cancer2_diagnosis_age",ovarian_cancer:"ovarian_cancer_diagnosis_age",prostate_cancer:"prostate_cancer_diagnosis_age",pancreatic_cancer:"pancreatic_cancer_diagnosis_age"},l=["brca1","brca2","palb2","atm","chek2","rad51d","rad51c","brip1"],h=["er","pr","her2","ck14","ck56"];new Object;var c=n(6939),u=n(44449);function d(t){c("#load").change((function(e){!function(t,e){let n=t.target.files[0];if(n){let t,u=new FileReader;u.onload=function(n){e.DEBUG&&console.log(n.target.result);try{if(0===n.target.result.indexOf("BOADICEA import pedigree file format 4.0"))e.dataset=y(n.target.result,4),m(e);else if(0===n.target.result.indexOf("BOADICEA import pedigree file format 2.0"))e.dataset=y(n.target.result,2),m(e);else if(0===n.target.result.indexOf("##")&&-1!==n.target.result.indexOf("CanRisk")){let i=function(t){let[e,n]=function(t){let e=t.trim().split("\n"),n=[],i=[];for(let t=0;t<e.length;t++){let a=e[t].trim();if(0===a.indexOf("##")){if(0===a.indexOf("##CanRisk")&&a.indexOf(";")>-1){let t=a.split(";");for(let e=1;e<t.length;e++)2===t[e].split("=").length&&i.push(t[e])}-1===a.indexOf("CanRisk")&&0!==a.indexOf("##FamID")&&i.push(a.replace("##",""));continue}let r=/\t/;a.indexOf("\t")<0&&(r=/\s+/,console.log("NOT TAB DELIM"));let c=o.map(a.split(r),(function(t,e){return t.trim()}));if(c.length>1){let e={famid:c[0],display_name:c[1],name:c[3],sex:c[6],status:c[8]};1==c[2]&&(e.proband=!0),"0"!==c[4]&&(e.father=c[4]),"0"!==c[5]&&(e.mother=c[5]),"0"!==c[7]&&(e.mztwin=c[7]),"0"!==c[9]&&(e.age=c[9]),"0"!==c[10]&&(e.yob=c[10]);let i=11;o.each(s,(function(t,n){"0"!==c[i]&&(e[n]=c[i]),i++})),"0"!==c[i++]&&(e.ashkenazi=1);for(let n=0;n<l.length;n++){let a=c[i].split(":");"0"!==a[0]&&("S"!==a[0]&&"T"!==a[0]||"P"!==a[1]&&"N"!==a[1]?console.warn("UNRECOGNISED GENE TEST ON LINE "+(t+1)+": "+a[0]+" "+a[1]):e[l[n]+"_gene_test"]={type:a[0],result:a[1]}),i++}let a=c[i].split(":");for(let n=0;n<a.length;n++)"0"!==a[n]&&("N"===a[n]||"P"===a[n]?e[h[n]+"_bc_pathology"]=a[n]:console.warn("UNRECOGNISED PATHOLOGY ON LINE "+(t+1)+": "+h[n]+" "+a[n]));n.unshift(e)}}return[i,n]}(t);try{return[e,g(n)]}catch(t){return console.error(t),[e,n]}}(n.target.result);t=i[0],e.dataset=i[1],m(e)}else try{e.dataset=JSON.parse(n.target.result)}catch(t){e.dataset=function(t){let e,n=t.trim().split("\n"),i=[];for(let t=0;t<n.length;t++){let a=c.map(n[t].trim().split(/\s+/),(function(t,e){return t.trim()}));if(a.length<5)throw"unknown format";let r="1"==a[4]?"M":"2"==a[4]?"F":"U",o={famid:a[0],display_name:a[1],name:a[1],sex:r};if("0"!==a[2]&&(o.father=a[2]),"0"!==a[3]&&(o.mother=a[3]),void 0!==e&&e!==o.famid){console.error("multiple family IDs found only using famid = "+e);break}if("2"==a[5]&&(o.affected=2),a.length>6){o.alleles="";for(let t=6;t<a.length;t+=2)o.alleles+=a[t]+"/"+a[t+1]+";"}i.unshift(o),e=a[0]}return g(i)}(n.target.result)}(0,r.ZR)(e)}catch(t){return console.error(t,n.target.result),void i.sY("File Error",t.message?t.message:t)}console.log(e.dataset);try{a.N0(e),(0,r.VU)(e),console.log(t),c(document).trigger("riskfactorChange",[e,t]),c(document).trigger("fhChange",[e]);try{acc_FamHist_ticked(),acc_FamHist_Leave(),RESULT.FLAG_FAMILY_MODAL=!0}catch(t){}}catch(t){i.sY("File Error",t.message?t.message:t)}},u.onerror=function(t){i.sY("File Error","File could not be read! Code "+t.target.error.code)},u.readAsText(n)}else console.error("File could not be read!");c("#load")[0].value=""}(e,t)})),c("#save").click((function(e){!function(t){let e=JSON.stringify(a.Vk(t));!function(t,e,n,i){t.DEBUG&&console.log(e);n||(n="ped.txt");i||(i="text/plain");let a=new Blob([e],{type:i});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,n);else{let t=document.createElement("a"),e=URL.createObjectURL(a);t.href=e,t.download=n,document.body.appendChild(t),t.click(),setTimeout((function(){document.body.removeChild(t),window.URL.revokeObjectURL(e)}),0)}}(t,e)}(t)})),c("#print").click((function(e){!function(t,e){t.constructor!==Array&&(t=[t]);let n=.9*c(window).width(),i=c(window).height()-10,a=["/static/css/canrisk.css","https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"],r=window.open("","PrintMap","width="+n+",height="+i),o="";for(let t=0;t<a.length;t++)o+='<link href="'+a[t]+'" rel="stylesheet" type="text/css" media="all">';o+="<style>body {font-size: "+c("body").css("font-size")+";}</style>";let s="";for(let n=0;n<t.length;n++)0===n&&e&&(s+=e),s+=c(t[n]).html(),n<t.length-1&&(s+='<div class="page-break"> </div>');r.document.write(o),r.document.write(s),r.document.close(),r.focus(),setTimeout((function(){r.print(),r.close()}),300)}(_(t))})),c("#svg_download").click((function(e){!function(t){let e=document.createElement("a");e.href="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.html()))),e.download="plot.svg",e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)}(_(t))})),c("#png_download").click((function(t){let e=p(c("svg"),"pedigree");c.when.apply(c,[e]).done((function(){let t=f(arguments,"pedigree");if(i.un()||i.w1()){let e="<img src='"+t.img+"' alt='canvas image'/>";window.open().document.write(e)}else{let e=document.createElement("a");e.href=t.img,e.download="plot.png",e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}))}))}function f(t,e){return c.grep(t,(function(t){return t&&t.name==e}))[0]}function p(t,e,n){let a={iscanvg:!1,resolution:1,img_type:"image/png"};if(n||(n=a),c.each(a,(function(t,e){t in n||(n[t]=e)})),0===t.find(".pdf-white-bg").length){let e=u.select(t.get(0));e.append("rect").attr("width","100%").attr("height","100%").attr("class","pdf-white-bg").attr("fill","white"),e.select(".pdf-white-bg").lower()}let r,o=c.Deferred();void 0!==window.XMLSerializer?r=(new XMLSerializer).serializeToString(t.get(0)):void 0!==t.xml&&(r=t.get(0).xml);let s="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r))),l=document.createElement("canvas");l.width=t.width()*n.resolution,l.height=t.height()*n.resolution;let h=l.getContext("2d"),d=document.createElement("img");return d.onload=function(){if(i.w1()){r=r.replace(/ font-size="\d?.\d*em"/g,""),r=r.replace(/<text /g,'<text font-size="12px" '),canvg.Canvg.fromString(h,r,{scaleWidth:l.width,scaleHeight:l.height,ignoreDimensions:!0}).start(),console.log(e,n.img_type,"use canvg to create image")}else h.drawImage(d,0,0,l.width,l.height),console.log(e,n.img_type);o.resolve({name:e,resolution:n.resolution,img:l.toDataURL(n.img_type,1),w:l.width,h:l.height})},d.src=s,o.promise()}function _(t){let e=a.Vk(t);null!=e&&(t.dataset=e);let n=(0,r.t_)(t),i=c("<div></div>"),o=c("#"+t.targetDiv).find("svg").clone().appendTo(i),s=515,l=757;if(t.width<n.width||t.height<n.height||n.width>s||n.height>l){let e=n.width,i=n.height+100,a=1;if(n.width>s||n.height>l){n.width>s&&(e=s),n.height>l&&(i=l);let t=e/n.width,r=i/n.height;a=t<r?t:r}o.attr("width",e),o.attr("height",i);let r=1.5*-t.symbol_size*a;o.find(".diagram").attr("transform","translate(0, "+r+") scale("+a+")")}return i}function m(t){c.each(t.dataset,(function(t,e){if(!e.hidden&&"M"===e.sex&&!i.IL(e)&&e[s.breast_cancer2]){let t="Male family member ("+e.display_name+") with contralateral breast cancer found. Please note that as the risk models do not take this into account the second breast cancer is ignored.";console.error(t),delete e[s.breast_cancer2],i.sY("Warning",t)}}))}function y(t,e){let n=t.trim().split("\n"),i=[];for(let t=2;t<n.length;t++){let a=c.map(n[t].trim().split(/\s+/),(function(t,e){return t.trim()}));if(a.length>1){let n={famid:a[0],display_name:a[1],name:a[3],sex:a[6],status:a[8]};1==a[2]&&(n.proband=!0),"0"!==a[4]&&(n.father=a[4]),"0"!==a[5]&&(n.mother=a[5]),"0"!==a[7]&&(n.mztwin=a[7]),"0"!==a[9]&&(n.age=a[9]),"0"!==a[10]&&(n.yob=a[10]);let r=11;if(c.each(s,(function(t,e){"0"!==a[r]&&(n[e]=a[r]),r++})),4===e){"0"!==a[r++]&&(n.ashkenazi=1);for(let e=0;e<5;e++)r+=2,"0"!==a[r-2]&&("S"!==a[r-2]&&"T"!==a[r-2]||"P"!==a[r-1]&&"N"!==a[r-1]?console.warn("UNRECOGNISED GENE TEST ON LINE "+(t+1)+": "+a[r-2]+" "+a[r-1]):n[l[e]+"_gene_test"]={type:a[r-2],result:a[r-1]})}else 2===e&&(r+=2,"0"!==a[r-2]&&("S"===a[r-2]||"T"===a[r-2]?"N"===a[r-1]?(n.brca1_gene_test={type:a[r-2],result:"N"},n.brca2_gene_test={type:a[r-2],result:"N"}):"1"===a[r-1]?(n.brca1_gene_test={type:a[r-2],result:"P"},n.brca2_gene_test={type:a[r-2],result:"N"}):"2"===a[r-1]?(n.brca1_gene_test={type:a[r-2],result:"N"},n.brca2_gene_test={type:a[r-2],result:"P"}):"3"===a[r-1]&&(n.brca1_gene_test={type:a[r-2],result:"P"},n.brca2_gene_test={type:a[r-2],result:"P"}):console.warn("UNRECOGNISED GENE TEST ON LINE "+(t+1)+": "+a[r-2]+" "+a[r-1])),"0"!==a[r++]&&(n.ashkenazi=1));for(let e=0;e<h.length;e++)"0"!==a[r]&&("N"===a[r]||"P"===a[r]?n[h[e]+"_bc_pathology"]=a[r]:console.warn("UNRECOGNISED PATHOLOGY ON LINE "+(t+1)+": "+h[e]+" "+a[r])),r++;i.unshift(n)}}try{return g(i)}catch(t){return console.error(t),i}}function g(t){for(let e=0;e<2;e++)for(let e=0;e<t.length;e++)v(t,t[e].name);let e=0;for(let n=0;n<t.length;n++)t[n].level&&t[n].level>e&&(e=t[n].level);for(let n=0;n<t.length;n++)if(1==i.hh(t,t[n].name))if(t[n].level&&t[n].level==e)t[n].top_level=!0;else{t[n].noparents=!0;let e=x(t,t[n]);if(e>-1&&t[e].mother&&(t[n].mother=t[e].mother,t[n].father=t[e].father),!t[n].mother)for(let i=0;i<t.length;i++)t[n].level==t[i].level-1&&(e=x(t,t[i]),e>-1&&(t[n].mother="F"===t[i].sex?t[i].name:t[e].name,t[n].father="M"===t[i].sex?t[i].name:t[e].name))}else delete t[n].top_level;return t}function x(t,e){for(let n=0;n<t.length;n++){let a=t[n];if(e.name===a.mother)return i.qj(t,a.father);if(e.name===a.father)return i.qj(t,a.mother)}return-1}function v(t,e){let n=i.qj(t,e);b(n,t[n].level?t[n].level:0,t)}function b(t,e,n){let a=["mother","father"];e++;for(let r=0;r<a.length;r++){let o=i.qj(n,n[t][a[r]]);if(o>=0){let a=n[i.qj(n,n[t].mother)],r=n[i.qj(n,n[t].father)];(!n[o].level||n[o].level<e)&&(a.level=e,r.level=e),a.level<r.level?a.level=r.level:r.level<a.level&&(r.level=a.level),b(o,e,n)}}}},56327:(t,e,n)=>{"use strict";n.d(e,{Fx:()=>c,bn:()=>u,k8:()=>f,m6:()=>p,Vk:()=>_,Xp:()=>m,lp:()=>y,ZH:()=>g,N0:()=>x,cF:()=>v});let i=25,a={};function r(t){try{if("array"===t.store_type)return!1;if("local"!==t.store_type&&"session"!==t.store_type&&void 0!==t.store_type)return!1;let e="test";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}function o(t){return"PEDIGREE_"+t.btn_target+"_"}function s(t){return a[o(t)]}function l(t,e){return"local"===t.store_type?localStorage.getItem(e):sessionStorage.getItem(e)}function h(t,e,n){return"local"===t.store_type?localStorage.setItem(e,n):sessionStorage.setItem(e,n)}function c(t){let e=o(t),n="local"===t.store_type?localStorage:sessionStorage,i=[];for(let t=0;t<n.length;t++)0==n.key(t).indexOf(e)&&i.push(n.key(t));for(let t=0;t<i.length;t++)n.removeItem(i[t])}function u(t){let e;return e=r(t)?l(t,o(t)+"COUNT"):a[o(t)+"COUNT"],null!=e?e:0}function d(t,e){r(t)?h(t,o(t)+"COUNT",e):a[o(t)+"COUNT"]=e}function f(t){if(!t.dataset)return;let e=u(t);r(t)?h(t,o(t)+e,JSON.stringify(t.dataset)):(console.warn("Local storage not found/supported for this browser!",t.store_type),i=500,void 0===s(t)&&(a[o(t)]=[]),s(t).push(JSON.stringify(t.dataset))),e<i?e++:e=0,d(t,e)}function p(t){if(!r(t))return s(t)&&s(t).length>0?s(t).length:-1;for(let e=i;e>0;e--)if(null!==l(t,o(t)+(e-1)))return e;return-1}function _(t){let e=u(t)-1;return-1==e&&(e=i),r(t)?JSON.parse(l(t,o(t)+e)):s(t)?JSON.parse(s(t)[e]):void 0}function m(t,e){if(void 0===e&&(e=u(t)-2),e<0){let n=n(t);e=n<i?n-1:i-1}return d(t,e+1),r(t)?JSON.parse(l(t,o(t)+e)):JSON.parse(s(t)[e])}function y(t,e){return void 0===e&&(e=u(t)),e>=i&&(e=0),d(t,parseInt(e)+1),r(t)?JSON.parse(l(t,o(t)+e)):JSON.parse(s(t)[e])}function g(t){r(t)&&function(t){"local"===t.store_type?localStorage.clear():sessionStorage.clear()}(t),a={}}function x(t,e,n,i){if(r(t)){let a="local"===t.store_type?localStorage:sessionStorage;e?(h(t,o(t)+"_X",e),h(t,o(t)+"_Y",n)):(a.removeItem(o(t)+"_X"),a.removeItem(o(t)+"_Y"));let r=o(t)+"_ZOOM";i?h(t,r,i):a.removeItem(r)}}function v(t){if(!r(t)||null===localStorage.getItem(o(t)+"_X")&&null===sessionStorage.getItem(o(t)+"_X"))return[null,null];let e=[parseInt(l(t,o(t)+"_X")),parseInt(l(t,o(t)+"_Y"))];return null!==l(t,o(t)+"_ZOOM")&&e.push(parseFloat(l(t,o(t)+"_ZOOM"))),e}},85516:(t,e,n)=>{"use strict";n.d(e,{Bm:()=>j,c:()=>X,nZ:()=>K,cd:()=>H,J_:()=>Z,j:()=>J,t_:()=>Y,VU:()=>R,hN:()=>V,ZR:()=>C});var i=n(91843),a=n(56327),r=n(44449);let o;function s(t,e){let n=t.symbol_size/2,i=2.5*-t.symbol_size;o=r.zoom().scaleExtent([t.zoomIn,t.zoomOut]).filter((function(){return!((!t.zoomSrc||-1===t.zoomSrc.indexOf("wheel"))&&r.event.type&&"wheel"===r.event.type)&&("dblclick"!==r.event.type&&!r.event.button)})).on("zoom",(function(){!function(t){t.DEBUG&&console.log("zoom",r.event,r.event.transform);let e=r.event.transform,n=e.k&&1!==e.k?e.k:void 0;(0,a.N0)(t,e.x,e.y,n),r.select("#"+t.targetDiv).select(".diagram").attr("transform","translate("+e.x+","+e.y+")"+(n?" scale("+n+")":""))}(t)})),e.call(o);let s=(0,a.cF)(t),l=3==s.length?s[2]:1,h=null!==s[0]?s[0]/l:n*l,c=null!==s[1]?s[1]/l:i*l;var u=r.zoomIdentity.scale(l).translate(h,c);e.call(o.transform,u)}function l(t,e){r.select("#"+t.targetDiv).select("svg").transition().duration(50).call(o.scaleBy,e)}function h(t){let e=function(t){let e=c(t);return{wid:Math.abs(e.xmax-e.xmin),hgt:Math.abs(e.ymax-e.ymin)}}(t),n=r.select("#"+t.targetDiv).select("svg"),i=function(t){return{w:t.node().clientWidth,h:t.node().clientHeight}}(n),a=(i.w-2*t.symbol_size)/i.w/Math.max(e.wid/i.w,e.hgt/i.h);a<t.zoomIn&&o.scaleExtent([a,t.zoomOut]);let s=function(t){let e=c(t);return{x:e.xmin+(e.xmax-e.xmin)/2,y:e.ymin+(e.ymax-e.ymin)/2}}(t);n.call(o.translateTo,s.x,s.y),setTimeout((function(){n.transition().duration(700).call(o.scaleTo,a)}),400)}function c(t){let e=r.select("#"+t.targetDiv).select(".diagram"),n=Number.MAX_VALUE,i=-1e6,a=Number.MAX_VALUE,o=-1e6,s=t.symbol_size/2;return e.selectAll("g").each((function(t,e){t.x&&"hidden_root"!==t.data.name&&(t.x-s<n&&(n=t.x-s),t.x+s>i&&(i=t.x+s),t.y-s<a&&(a=t.y-s),t.y+s>o&&(o=t.y+s))})),{xmin:n,xmax:i,ymin:a,ymax:o}}var u=n(6939);function d(t){let e=u.extend({btn_target:"pedigree_history"},t),n=[{fa:"fa-undo pull-left",title:"undo"},{fa:"fa-repeat pull-left",title:"redo"},{fa:"fa-refresh pull-left",title:"reset"}];n.push({fa:"fa-crosshairs pull-right",title:"scale-to-fit"}),e.zoomSrc&&e.zoomSrc.indexOf("button")>-1&&(1!=e.zoomOut&&n.push({fa:"fa-minus-circle pull-right",title:"zoom-out"}),1!=e.zoomIn&&n.push({fa:"fa-plus-circle pull-right",title:"zoom-in"})),n.push({fa:"fa-arrows-alt pull-right",title:"fullscreen"});let r="";for(let t=0;t<n.length;t++)r+="<span>",r+='&nbsp;<i class="fa fa-lg '+n[t].fa+'" '+("fa-arrows-alt pull-right"==n[t].fa?'id="fullscreen" ':"")+' aria-hidden="true" title="'+n[t].title+'"></i>',r+="</span>";u("#"+e.btn_target).append(r),function(t){u(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",(function(e){let n=a.Vk(t);null!=n&&(t.dataset=n),R(t),setTimeout((function(){h(t)}),500)})),u("#fullscreen").on("click",(function(e){if(f())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{let e=u("#"+t.targetDiv)[0];e.requestFullscreen?e.requestFullscreen():document.documentElement.mozRequestFullScreen?e.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):document.documentElement.msRequestFullscreen&&e.msRequestFullscreen()}}));let e=0;function n(){l(t,1.05)}function r(){l(t,.95)}u(".fa-plus-circle, .fa-minus-circle").on("mousedown",(function(){e=setInterval(u(this).hasClass("fa-plus-circle")?n:r,50)})).on("mouseup mouseleave",(function(){clearInterval(e)})),u("#"+t.btn_target).on("click",(function(e){if(e.stopPropagation(),u(e.target).hasClass("disabled"))return!1;u(e.target).hasClass("fa-undo")?(t.dataset=a.Xp(t),u("#"+t.targetDiv).empty(),Z(t)):u(e.target).hasClass("fa-repeat")?(t.dataset=a.lp(t),u("#"+t.targetDiv).empty(),Z(t)):u(e.target).hasClass("fa-refresh")?u('<div id="msgDialog">Resetting the pedigree may result in loss of some data.</div>').dialog({title:"Confirm Reset",resizable:!1,height:"auto",width:400,modal:!0,buttons:{Continue:function(){!function(t,e){let n;if(e){let e=a.Vk(t),r=(0,i.KY)(e);n=r[(0,i.Kz)(r)],n.name="ch1",n.mother="f21",n.father="m21",a.Fx(t)}else n={name:"ch1",sex:"F",mother:"f21",father:"m21",proband:!0,status:"0",display_name:"me"},a.ZH(t);delete t.dataset;let r=u("input[name='default_fam']:checked");r.length>0&&"extended2"==r.val()?t.dataset=[{name:"wZA",sex:"M",top_level:!0,status:"0",display_name:"paternal grandfather"},{name:"MAk",sex:"F",top_level:!0,status:"0",display_name:"paternal grandmother"},{name:"zwB",sex:"M",top_level:!0,status:"0",display_name:"maternal grandfather"},{name:"dOH",sex:"F",top_level:!0,status:"0",display_name:"maternal grandmother"},{name:"MKg",sex:"F",mother:"MAk",father:"wZA",status:"0",display_name:"paternal aunt"},{name:"xsm",sex:"M",mother:"MAk",father:"wZA",status:"0",display_name:"paternal uncle"},{name:"m21",sex:"M",mother:"MAk",father:"wZA",status:"0",display_name:"father"},{name:"f21",sex:"F",mother:"dOH",father:"zwB",status:"0",display_name:"mother"},{name:"aOH",sex:"F",mother:"f21",father:"m21",status:"0",display_name:"sister"},{name:"Vha",sex:"M",mother:"f21",father:"m21",status:"0",display_name:"brother"},{name:"Spj",sex:"M",mother:"f21",father:"m21",noparents:!0,status:"0",display_name:"partner"},n,{name:"zhk",sex:"F",mother:"ch1",father:"Spj",status:"0",display_name:"daughter"},{name:"Knx",display_name:"son",sex:"M",mother:"ch1",father:"Spj",status:"0"},{name:"uuc",display_name:"maternal aunt",sex:"F",mother:"dOH",father:"zwB",status:"0"},{name:"xIw",display_name:"maternal uncle",sex:"M",mother:"dOH",father:"zwB",status:"0"}]:r.length>0&&"extended1"==r.val()?t.dataset=[{name:"m21",sex:"M",mother:null,father:null,status:"0",display_name:"father",noparents:!0},{name:"f21",sex:"F",mother:null,father:null,status:"0",display_name:"mother",noparents:!0},{name:"aOH",sex:"F",mother:"f21",father:"m21",status:"0",display_name:"sister"},{name:"Vha",sex:"M",mother:"f21",father:"m21",status:"0",display_name:"brother"},{name:"Spj",sex:"M",mother:"f21",father:"m21",noparents:!0,status:"0",display_name:"partner"},n,{name:"zhk",sex:"F",mother:"ch1",father:"Spj",status:"0",display_name:"daughter"},{name:"Knx",display_name:"son",sex:"M",mother:"ch1",father:"Spj",status:"0"}]:t.dataset=[{name:"m21",display_name:"father",sex:"M",top_level:!0},{name:"f21",display_name:"mother",sex:"F",top_level:!0},n];R(t)}(t,t.keep_proband_on_reset),u(this).dialog("close")},Cancel:function(){u(this).dialog("close")}}}):u(e.target).hasClass("fa-crosshairs")&&h(t),u(document).trigger("fhChange",[t])}))}(e)}function f(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}var p=n(10527),_=n(6939);function m(t){_("#orig_ashk").is(":checked")?_.each(t,(function(t,e){e.proband&&(e.ashkenazi=1)})):_.each(t,(function(t,e){delete e.ashkenazi}))}function y(t){_("#cancer .row").show(),"M"===t.sex?(delete t.ovarian_cancer_diagnosis_age,_("[id^='id_ovarian_cancer_diagnosis_age']").closest(".row").hide(),_("[id^='id_breast_cancer2_diagnosis_age']").prop("disabled",!0)):"F"===t.sex&&(delete t.prostate_cancer_diagnosis_age,_("[id^='id_prostate_cancer_diagnosis_age']").closest(".row").hide(),_("[id^='id_breast_cancer2_diagnosis_age']").prop("disabled",!1))}function g(t){let e=10*Math.round((t-1)/10);return t<e?e-5:e+5}_(document).on("fhChange",(function(t,e){try{let t=_("#id_name").val();void 0===(0,i.Lw)((0,a.Vk)(e),t)?_("form > fieldset").prop("disabled",!0):_("form > fieldset").prop("disabled",!1)}catch(t){console.warn(t)}}));var x=n(6939),v=n(44449);let b,w;function z(t,e){let n=parseInt(x("body").css("font-size")),r=v.select(".diagram");r.append("rect").attr("class","popup_selection").attr("rx",6).attr("ry",6).attr("transform","translate(-1000,-100)").style("opacity",0).attr("width",7.9*n).attr("height",2*n).style("stroke","darkgrey").attr("fill","white");let o=r.append("text").attr("font-family","FontAwesome").style("opacity",0).attr("font-size","1.em").attr("class","popup_selection fa-lg fa-square persontype").attr("transform","translate(-1000,-100)").attr("x",n/3).attr("y",1.5*n).text(" ").append("svg:title").text("add male"),s=r.append("text").attr("font-family","FontAwesome").style("opacity",0).attr("font-size","1.em").attr("class","popup_selection fa-lg fa-circle persontype").attr("transform","translate(-1000,-100)").attr("x",1.7*n).attr("y",1.5*n).text(" ").append("svg:title").text("add female");r.append("text").attr("font-family","FontAwesome").style("opacity",0).attr("font-size","1.em").attr("transform","translate(-1000,-100)").attr("class","popup_selection fa-lg fa-unspecified popup_selection_rotate45 persontype").text(" ").append("svg:title").text("add unspecified"),r.append("text").attr("font-family","FontAwesome").style("opacity",0).attr("transform","translate(-1000,-100)").attr("class","popup_selection fa-2x fa-angle-up persontype dztwin").attr("x",4.6*n).attr("y",1.5*n).text(" ").append("svg:title").text("add dizygotic/fraternal twins"),r.append("text").attr("font-family","FontAwesome").style("opacity",0).attr("transform","translate(-1000,-100)").attr("class","popup_selection fa-2x fa-caret-up persontype mztwin").attr("x",6.2*n).attr("y",1.5*n).text("").append("svg:title").text("add monozygotic/identical twins");let l={};v.selectAll(".persontype").on("click",(function(){let e,n,r=(0,i.KY)((0,a.Vk)(t)),o=v.select(this).classed("mztwin"),s=v.select(this).classed("dztwin");if(o||s?(n=l.node.datum().data.sex,e=o?"mztwin":"dztwin"):n=v.select(this).classed("fa-square")?"M":v.select(this).classed("fa-circle")?"F":"U","addsibling"===l.type)H(r,l.node.datum().data,n,!1,e);else{if("addchild"!==l.type)return;j(r,l.node.datum().data,e?"U":n,e?2:1,e)}t.dataset=r,R(t),v.selectAll(".popup_selection").style("opacity",0),l={}})).on("mouseover",(function(){l.node&&l.node.select("rect").style("opacity",.2),v.selectAll(".popup_selection").style("opacity",1),"addsibling"===l.type?v.select(this).classed("fa-square")?o.text("add brother"):s.text("add sister"):"addchild"===l.type&&(v.select(this).classed("fa-square")?o.text("add son"):s.text("add daughter"))})),v.selectAll(".popup_selection").on("mouseout",(function(){void 0!==l.node&&-1==f.indexOf(l.node.datum())&&l.node.select("rect").style("opacity",0),v.selectAll(".popup_selection").style("opacity",0)})),function(t){function e(){b=w,v.selectAll(".line_drag_selection").attr("stroke","darkred")}function n(e){if(w&&b.data.name!==w.data.name&&b.data.sex!==w.data.sex){let e={name:(0,i.YO)(4),sex:"U",mother:"F"===b.data.sex?b.data.name:w.data.name,father:"F"===b.data.sex?w.data.name:b.data.name},n=(0,i.KY)(t.dataset);t.dataset=n;let a=(0,i.qj)(t.dataset,b.data.name)+1;t.dataset.splice(a,0,e),R(t)}T(0,0,0,0),v.selectAll(".line_drag_selection").attr("stroke","black"),b=void 0}function a(e){v.event.sourceEvent.stopPropagation();let n=v.event.dx,i=v.event.dy,a=parseFloat(v.select(this).attr("x2"))+n,r=parseFloat(v.select(this).attr("y2"))+i;T(t.symbol_size-10,0,a,r)}v.select(".diagram").append("line").attr("class","line_drag_selection").attr("stroke-width",6).style("stroke-dasharray","2, 1").attr("stroke","black").call(v.drag().on("start",e).on("drag",a).on("end",n)).append("svg:title").text("drag to create consanguineous partners"),T(0,0,0,0)}(t),e.filter((function(e){return!(e.data.hidden&&!t.DEBUG)})).append("rect").attr("class","indi_rect").attr("rx",6).attr("ry",6).attr("x",(function(e){return-.75*t.symbol_size})).attr("y",(function(e){return-t.symbol_size})).attr("width",1.5*t.symbol_size+"px").attr("height",2*t.symbol_size+"px").style("stroke","black").style("stroke-width",.7).style("opacity",0).attr("fill","lightgrey");let h=function(e){return u-.75*t.symbol_size},c=t.symbol_size-2,u=0,d={addchild:{text:"",title:"add child",fx:h,fy:c},addsibling:{text:"",title:"add sibling",fx:h,fy:c},addpartner:{text:"",title:"add partner",fx:h,fy:c},addparents:{text:"",title:"add parents",fx:-.75*t.symbol_size,fy:11-t.symbol_size},delete:{text:"X",title:"delete",fx:t.symbol_size/2-1,fy:12-t.symbol_size,styles:{"font-weight":"bold",fill:"darkred","font-family":"monospace"}}};t.edit&&(d.settings={text:"",title:"settings",fx:-n/2+2,fy:11-t.symbol_size});for(let n in d){let i=e.filter((function(e){return!(e.data.hidden&&!t.DEBUG||(void 0===e.data.mother||e.data.noparents)&&"addsibling"===n||void 0!==e.data.parent_node&&e.data.parent_node.length>1&&"addpartner"===n||void 0===e.data.parent_node&&"addchild"===n||void 0===e.data.noparents&&void 0===e.data.top_level&&"addparents"===n)})).append("text").attr("class",n).style("opacity",0).attr("font-family","FontAwesome").attr("xx",(function(t){return t.x})).attr("yy",(function(t){return t.y})).attr("x",d[n].fx).attr("y",d[n].fy).attr("font-size","0.9em").text(d[n].text);if("styles"in d[n])for(let t in d[n].styles)i.attr(t,d[n].styles[t]);i.append("svg:title").text(d[n].title),u+=17}v.selectAll(".addsibling, .addchild").on("mouseover",(function(){let t=v.select(this).attr("class");v.selectAll(".popup_selection").style("opacity",1),l={node:v.select(this.parentNode),type:t};let e=parseInt(v.select(this).attr("xx"))+parseInt(v.select(this).attr("x")),i=parseInt(v.select(this).attr("yy"))+parseInt(v.select(this).attr("y"));v.selectAll(".popup_selection").attr("transform","translate("+e+","+(i+2)+")"),v.selectAll(".popup_selection_rotate45").attr("transform","translate("+(e+3*n)+","+(i+1.2*n)+") rotate(45)")})),v.selectAll(".addchild, .addpartner, .addparents, .delete, .settings").on("click",(function(){v.event.stopPropagation();let e,n=v.select(this).attr("class"),r=v.select(this.parentNode).datum();t.DEBUG&&console.log(n),"settings"===n?"function"==typeof t.edit?t.edit(t,r):function(t,e){x("#node_properties").dialog({autoOpen:!1,title:e.data.display_name,width:x(window).width()>400?450:x(window).width()-30});let n="<table id='person_details' class='table'>";n+="<tr><td style='text-align:right'>Unique ID</td><td><input class='form-control' type='text' id='id_name' name='name' value="+(e.data.name?e.data.name:"")+"></td></tr>",n+="<tr><td style='text-align:right'>Name</td><td><input class='form-control' type='text' id='id_display_name' name='display_name' value="+(e.data.display_name?e.data.display_name:"")+"></td></tr>",n+="<tr><td style='text-align:right'>Age</td><td><input class='form-control' type='number' id='id_age' min='0' max='120' name='age' style='width:7em' value="+(e.data.age?e.data.age:"")+"></td></tr>",n+="<tr><td style='text-align:right'>Year Of Birth</td><td><input class='form-control' type='number' id='id_yob' min='1900' max='2050' name='yob' style='width:7em' value="+(e.data.yob?e.data.yob:"")+"></td></tr>",n+='<tr><td colspan="2" id="id_sex"><label class="radio-inline"><input type="radio" name="sex" value="M" '+("M"===e.data.sex?"checked":"")+'>Male</label><label class="radio-inline"><input type="radio" name="sex" value="F" '+("F"===e.data.sex?"checked":"")+'>Female</label><label class="radio-inline"><input type="radio" name="sex" value="U">Unknown</label></td></tr>',n+='<tr><td colspan="2" id="id_status"><label class="checkbox-inline"><input type="radio" name="status" value="0" '+(0===parseInt(e.data.status)?"checked":"")+'>&thinsp;Alive</label><label class="checkbox-inline"><input type="radio" name="status" value="1" '+(1===parseInt(e.data.status)?"checked":"")+">&thinsp;Deceased</label></td></tr>",x("#id_status input[value='"+e.data.status+"']").prop("checked",!0);let r=["adopted_in","adopted_out","miscarriage","stillbirth","termination"];n+='<tr><td colspan="2"><strong>Reproduction:</strong></td></tr>',n+='<tr><td colspan="2">';for(let t=0;t<r.length;t++){let i=r[t];2===t&&(n+='</td></tr><tr><td colspan="2">'),n+='<label class="checkbox-inline"><input type="checkbox" id="id_'+i+'" name="'+i+'" value="0" '+(e.data[i]?"checked":"")+">&thinsp;"+M(i.replace("_"," "))+"</label>"}n+="</td></tr>";let o=["children","name","parent_node","top_level","id","noparents","level","age","sex","status","display_name","mother","father","yob","mztwin","dztwin"];x.merge(o,r),n+='<tr><td colspan="2"><strong>Age of Diagnosis:</strong></td></tr>',x.each(t.diseases,(function(i,a){o.push(a.type+"_diagnosis_age");let r='&thinsp;<span style="padding-left:5px;background:'+t.diseases[i].colour+'"></span>',s=e.data[a.type+"_diagnosis_age"];n+="<tr><td style='text-align:right'>"+M(a.type.replace("_"," "))+r+"&nbsp;</td><td><input class='form-control' id='id_"+a.type+"_diagnosis_age_0' max='110' min='0' name='"+a.type+"_diagnosis_age_0' style='width:5em' type='number' value='"+(void 0!==s?s:"")+"'></td></tr>"})),n+='<tr><td colspan="2" style="line-height:1px;"></td></tr>',x.each(e.data,(function(t,e){if(-1==x.inArray(t,o)){let i=M(t);!0===e||!1===e?n+="<tr><td style='text-align:right'>"+i+"&nbsp;</td><td><input type='checkbox' id='id_"+t+"' name='"+t+"' value="+e+" "+(e?"checked":"")+"></td></tr>":t.length>0&&(n+="<tr><td style='text-align:right'>"+i+"&nbsp;</td><td><input type='text' id='id_"+t+"' name='"+t+"' value="+e+"></td></tr>")}})),n+="</table>",x("#node_properties").html(n),x("#node_properties").dialog("open"),x("#node_properties input[type=radio], #node_properties input[type=checkbox], #node_properties input[type=text], #node_properties input[type=number]").change((function(){!function(t){let e=(0,a.Vk)(t),n=_("#id_name").val(),r=(0,i.KY)(e),o=(0,i.Lw)(r,n);if(!o)return void console.warn("person not found when saving details");_("#"+t.targetDiv).empty();let s=_("#id_yob_0").val();s&&""!==s?o.yob=s:delete o.yob;let l=_("#id_status").find("input[type='radio']:checked");l.length>0&&(o.status=l.val());let h=["miscarriage","adopted_in","adopted_out","termination","stillbirth"];for(let t=0;t<h.length;t++){let e=h[t],n=_("#id_"+e);n.length>0&&(console.log(n.is(":checked")),n.is(":checked")?o[e]=!0:delete o[e])}let c=_("#id_sex").find("input[type='radio']:checked");c.length>0&&(o.sex=c.val(),y(o)),m(r),_("#id_approx").is(":checked")?o.approx_diagnosis_age=!0:delete o.approx_diagnosis_age,_("#person_details select[name*='_diagnosis_age']:visible, #person_details input[type=text]:visible, #person_details input[type=number]:visible").each((function(){let t=this.name.indexOf("_diagnosis_age")>-1?this.name.substring(0,this.name.length-2):this.name;if(_(this).val()){let e=_(this).val();t.indexOf("_diagnosis_age")>-1&&_("#id_approx").is(":checked")&&(e=g(e)),o[t]=e}else delete o[t]})),_('#person_details input[type="checkbox"][name$="cancer"],input[type="checkbox"][name$="cancer2"]').each((function(){this.checked?o[_(this).attr("name")]=!0:delete o[_(this).attr("name")]})),_('#person_details select[name$="_bc_pathology"]').each((function(){"-"!==_(this).val()?o[_(this).attr("name")]=_(this).val():delete o[_(this).attr("name")]})),_('#person_details select[name$="_gene_test"]').each((function(){if("-"!==_(this).val()){let t=_('select[name="'+_(this).attr("name")+'_result"]');o[_(this).attr("name")]={type:_(this).val(),result:_(t).val()}}else delete o[_(this).attr("name")]}));try{_("#person_details").find("form").valid()}catch(t){console.warn("valid() not found")}V(r,o),t.dataset=r,R(t)}(t)}))}(t,r):"delete"===n?(e=(0,i.KY)((0,a.Vk)(t)),J(e,r.data,t,k)):"addparents"===n?(e=(0,i.KY)((0,a.Vk)(t)),t.dataset=e,X(t,e,r.data.name),R(t)):"addpartner"===n&&(e=(0,i.KY)((0,a.Vk)(t)),K(t,e,r.data.name),t.dataset=e,R(t)),x(document).trigger("fhChange",[t])}));let f=[];e.filter((function(t){return!t.data.hidden})).on("click",(function(e){v.event.ctrlKey?-1==f.indexOf(e)?f.push(e):f.splice(f.indexOf(e),1):f=[e],"nodeclick"in t&&(t.nodeclick(e.data),v.selectAll(".indi_rect").style("opacity",0),v.selectAll(".indi_rect").filter((function(t){return-1!=f.indexOf(t)})).style("opacity",.5))})).on("mouseover",(function(e){v.event.stopPropagation(),w=e,b?b.data.name!==w.data.name&&b.data.sex!==w.data.sex&&v.select(this).select("rect").style("opacity",.2):(v.select(this).select("rect").style("opacity",.2),v.select(this).selectAll(".addchild, .addsibling, .addpartner, .addparents, .delete, .settings").style("opacity",1),v.select(this).selectAll(".indi_details").style("opacity",0),T(t.symbol_size-10,0,t.symbol_size-2,0,e.x+","+(e.y+2)))})).on("mouseout",(function(e){if(b)return;v.select(this).selectAll(".addchild, .addsibling, .addpartner, .addparents, .delete, .settings").style("opacity",0),-1==f.indexOf(e)&&v.select(this).select("rect").style("opacity",0),v.select(this).selectAll(".indi_details").style("opacity",1);let n=v.mouse(this)[0],i=v.mouse(this)[1];i<.8*t.symbol_size&&v.selectAll(".popup_selection").style("opacity",0),b||(Math.abs(i)>.25*t.symbol_size||Math.abs(i)<-.25*t.symbol_size||n<.2*t.symbol_size)&&T(0,0,0,0)}))}function k(t,e){t.dataset=e,R(t)}function T(t,e,n,i,a){a&&v.selectAll(".line_drag_selection").attr("transform","translate("+a+")"),v.selectAll(".line_drag_selection").attr("x1",t).attr("y1",e).attr("x2",n).attr("y2",i)}function M(t){return t.charAt(0).toUpperCase()+t.slice(1)}var E=n(6939);function A(t,e){B(t,e,-.4*t.symbol_size,-.1*t.symbol_size,(function(e){return t.DEBUG?("display_name"in e.data?e.data.display_name:e.data.name)+"  "+e.data.id:"display_name"in e.data?e.data.display_name:""}),void 0,["display_name"]);let n=parseInt(function(t){let e=t.font_size;if(e===parseInt(e,10))return e;if(e.indexOf("px")>-1)return e.replace("px","");if(-1===e.indexOf("em"))return e;return e=parseFloat(e.replace("em","")),parseFloat(getComputedStyle(E("#"+t.targetDiv).get(0)).fontSize)*e-1}(t))+4;for(let i=0;i<t.labels.length;i++){let a=t.labels[i],r=Array.isArray(a)?a:[a];(r.indexOf("age")>-1||r.indexOf("yob")>-1)&&B(t,e,-t.symbol_size,(function(t){return O(t,r,n)}),(function(t){return N(t,r)}),"indi_details",r)}for(let i=0;i<t.diseases.length;i++){let a=t.diseases[i].type;B(t,e,-t.symbol_size,(function(t){return O(t,[a],n)}),(function(t){let e=a.replace("_"," ").replace("cancer","ca.");return a+"_diagnosis_age"in t.data?e+": "+t.data[a+"_diagnosis_age"]:""}),"indi_details",[a])}for(let i=0;i<t.labels.length;i++){let a=t.labels[i],r=Array.isArray(a)?a:[a];-1===r.indexOf("age")&&-1===r.indexOf("yob")&&B(t,e,-t.symbol_size,(function(t){return O(t,r,n)}),(function(t){return N(t,r)}),"indi_details",r)}}function N(t,e){let n="";for(let i=0;i<e.length;i++){let a=e[i];if(t.data[a])if("alleles"===a){let e=t.data.alleles.split(";");for(let t=0;t<e.length;t++)""!==e[t]&&(n+=e[t]+";")}else if("age"===a)n+=t.data[a]+"y ";else if("stillbirth"===a)n+="SB";else if(a.match("_gene_test$")&&"result"in t.data[a]){let e=t.data[a].result.toUpperCase();"-"!==e&&(n+=a.replace("_gene_test","").toUpperCase(),n+="P"===e?"+ ":"N"===e?"- ":" ")}else if(a.match("_bc_pathology$")){let e=t.data[a].toUpperCase();n+=a.replace("_bc_pathology","").toUpperCase(),n+="P"===e?"+ ":"N"===e?"- ":" "}else n+=t.data[a]}if(""!==n)return n}function O(t,e,n){if(S(t,e))return t.y_offset=t.y_offset?t.y_offset+n:2.35*n,t.y_offset}function S(t,e){for(let n=0;n<e.length;n++)if((0,i.UY)(e[n],t.data))return!0;return!1}function B(t,e,n,i,a,r,o){e.filter((function(t){return!t.data.hidden&&(!o||S(t,o))})).append("text").attr("class",r?r+" ped_label":"ped_label").attr("x",n).attr("y",i).attr("font-family",t.font_family).attr("font-size",t.font_size).attr("font-weight",t.font_weight).text(a)}var I=n(6939),F=n(44449);let D={};function Z(t){let e=I.extend({targetDiv:"pedigree_edit",dataset:[{name:"m21",display_name:"father",sex:"M",top_level:!0},{name:"f21",display_name:"mother",sex:"F",top_level:!0},{name:"ch1",display_name:"me",sex:"F",mother:"f21",father:"m21",proband:!0}],width:600,height:400,symbol_size:35,zoomSrc:["wheel","button"],zoomIn:1,zoomOut:1,diseases:[{type:"breast_cancer",colour:"#F68F35"},{type:"breast_cancer2",colour:"pink"},{type:"ovarian_cancer",colour:"#4DAA4D"},{type:"pancreatic_cancer",colour:"#4289BA"},{type:"prostate_cancer",colour:"#D5494A"}],labels:["stillbirth",["age","yob"],"alleles",["brca1_gene_test","brca2_gene_test","palb2_gene_test","chek2_gene_test","atm_gene_test"],["rad51d_gene_test","rad51c_gene_test","brip1_gene_test"],["er_bc_pathology","pr_bc_pathology","her2_bc_pathology","ck14_bc_pathology","ck56_bc_pathology"]],keep_proband_on_reset:!1,font_size:".75em",font_family:"Helvetica",font_weight:700,background:"#EEE",node_background:"#fdfdfd",validate:!0,DEBUG:!1},t);0===I("#fullscreen").length&&(d(e),p.IH(e)),-1==a.m6(e)&&a.k8(e),function(t){let e=a.bn(t),n=a.m6(t),i="#"+t.btn_target;n<=e?u(i+" .fa-repeat").addClass("disabled"):u(i+" .fa-repeat").removeClass("disabled"),e>1?u(i+" .fa-undo").removeClass("disabled"):u(i+" .fa-undo").addClass("disabled")}(e),C(e),e.dataset=function(t){for(let e=0;e<t.length;e++)2==i.hh(t,t[e].name)&&(t[e].top_level=!0);let e=[],n=[];for(let a=0;a<t.length;a++){let r=t[a];if("top_level"in r&&-1==I.inArray(r.name,n)){n.push(r.name),e.push(r);let a=i.UQ(t,r);for(let r=0;r<a.length;r++)-1==I.inArray(a[r],n)&&(n.push(a[r]),e.push(i.Lw(t,a[r])))}}let a=I.map(t,(function(t,e){return"top_level"in t&&t.top_level?null:t}));for(let t=e.length;t>0;--t)a.unshift(e[t-1]);return a}(e.dataset),e.DEBUG&&i.Tx(e);let n=P(e),r=F.select("#"+e.targetDiv).append("svg:svg").attr("width",n.width).attr("height",n.height);r.append("rect").attr("width","100%").attr("height","100%").attr("rx",6).attr("ry",6).style("stroke","darkgrey").style("fill",e.background).style("stroke-width",1);let o=r.append("g").attr("class","diagram"),l={name:"hidden_root",id:0,hidden:!0,children:I.map(e.dataset,(function(t,e){return"top_level"in t&&t.top_level?t:null}))},h=i.fX(e,l,l)[0],c=F.hierarchy(l);D[e.targetDiv]=c;let f=Y(e);e.DEBUG&&console.log("opts.width="+n.width+" width="+f.width+" opts.height="+n.height+" height="+f.height);let _=F.tree().separation((function(t,e){return t.parent===e.parent||t.data.hidden||e.data.hidden?1.2:2.2})).size([f.width,f.height])(c.sort((function(t,e){return t.data.id-e.data.id}))),m=_.descendants();if(I.map(e.dataset,(function(t,e){return t.hidden?null:t})).length!=e.dataset.length)throw L("NUMBER OF VISIBLE NODES DIFFERENT TO NUMBER IN THE DATASET");i.e3(e,_,m);let y=i.Yc(m,h);!function(t,e){for(let n=0;n<e.length;n++){let i=U(t,e[n]);i&&console.log("CLASH :: "+e[n].mother.data.name+" "+e[n].father.data.name,i)}}(e,y);let g=o.selectAll(".node").data(_.descendants()).enter().append("g").attr("transform",(function(t,e){return"translate("+t.x+","+t.y+")"}));g.filter((function(t){return!t.data.hidden})).append("path").attr("shape-rendering","geometricPrecision").attr("transform",(function(t){return"U"!=t.data.sex||t.data.miscarriage||t.data.termination?"":"rotate(45)"})).attr("d",F.symbol().size((function(t){return e.symbol_size*e.symbol_size+2})).type((function(t){return t.data.miscarriage||t.data.termination?F.symbolTriangle:"F"==t.data.sex?F.symbolCircle:F.symbolSquare}))).style("stroke",(function(t){return t.data.age&&t.data.yob&&!t.data.exclude?"#303030":"grey"})).style("stroke-width",(function(t){return t.data.age&&t.data.yob&&!t.data.exclude?".3em":".1em"})).style("stroke-dasharray",(function(t){return t.data.exclude?"3, 3":null})).style("fill","none"),g.filter((function(t){return!(t.data.hidden&&!e.DEBUG)})).append("clipPath").attr("id",(function(t){return t.data.name})).append("path").attr("class","node").attr("transform",(function(t){return"U"!=t.data.sex||t.data.miscarriage||t.data.termination?"":"rotate(45)"})).attr("d",F.symbol().size((function(t){return t.data.hidden?e.symbol_size*e.symbol_size/5:e.symbol_size*e.symbol_size})).type((function(t){return t.data.miscarriage||t.data.termination?F.symbolTriangle:"F"==t.data.sex?F.symbolCircle:F.symbolSquare}))),g.filter((function(t){return!(t.data.hidden&&!e.DEBUG)})).selectAll("pienode").data((function(t){let n=0,a=I.map(e.diseases,(function(a,r){return i.UY(e.diseases[r].type,t.data)?(n++,1):0}));return 0===n&&(a=[1]),[I.map(a,(function(e,i){return{cancer:e,ncancers:n,id:t.data.name,sex:t.data.sex,proband:t.data.proband,hidden:t.data.hidden,affected:t.data.affected,exclude:t.data.exclude}}))]})).enter().append("g").selectAll("path").data(F.pie().value((function(t){return t.cancer}))).enter().append("path").attr("clip-path",(function(t){return"url(#"+t.data.id+")"})).attr("class","pienode").attr("d",F.arc().innerRadius(0).outerRadius(e.symbol_size)).style("fill",(function(t,n){return t.data.exclude?"lightgrey":0===t.data.ncancers?t.data.affected?"darkgrey":e.node_background:e.diseases[n].colour})),g.filter((function(t){return!t.data.hidden&&(t.data.adopted_in||t.data.adopted_out)})).append("path").attr("d",(function(t){{let t=-.66*e.symbol_size,n=-.64*e.symbol_size,i=e.symbol_size/4;return q(t,n,i,e)+q(-t,n,-i,e)}})).style("stroke",(function(t){return t.data.age&&t.data.yob&&!t.data.exclude?"#303030":"grey"})).style("stroke-width",(function(t){return".1em"})).style("stroke-dasharray",(function(t){return t.data.exclude?"3, 3":null})).style("fill","none"),g.filter((function(t){return 1==t.data.status})).append("line").style("stroke","black").attr("x1",(function(t,n){return-.6*e.symbol_size})).attr("y1",(function(t,n){return.6*e.symbol_size})).attr("x2",(function(t,n){return.6*e.symbol_size})).attr("y2",(function(t,n){return-.6*e.symbol_size})),A(e,g),z(e,g);let x={},v=function(t,e,n,i,a,r){let o=function(t,e){return t+1<e?o(++t):t},s="";for(let l=0;l<t.length;l++){let h=o(l,t.length),c=t[l]-e-r,u=t[h]+e+r;a.x>c&&a.x<u&&(a.y=i),s+="L"+c+","+(n-r)+"L"+c+","+(i-r)+"L"+u+","+(i-r)+"L"+u+","+(n-r),l=h}return s};h=o.selectAll(".partner").data(y).enter().insert("path","g").attr("fill","none").attr("stroke","#000").attr("shape-rendering","auto").attr("d",(function(t,n){let a,r,o,s=i.Lw(m,t.mother.data.name),l=i.Lw(m,t.father.data.name),h=i._L(s,l,e),c=t.mother.data.divorced&&t.mother.data.divorced===t.father.data.name,u=t.mother.x<t.father.x?t.mother.x:t.father.x,d=t.mother.x<t.father.x?t.father.x:t.mother.x,f=t.mother.y,p=U(e,t),_="";if(p){t.mother.depth in x?x[t.mother.depth]+=4:x[t.mother.depth]=4,f-=x[t.mother.depth],r=x[t.mother.depth]+e.symbol_size/2+2;let n=t.mother.data.parent_node,s=n[0];for(let e=0;e<n.length;e++)n[e].father.name===t.father.data.name&&n[e].mother.name===t.mother.data.name&&(s=n[e].name);o=i.Lw(m,s),o.y=f,p.sort((function(t,e){return t-e})),a=f-e.symbol_size/2-3,_=v(p,r,f,a,o,0)}let y="";if(c&&!p&&(y="M"+(u+.66*(d-u)+6)+","+(f-6)+"L"+(u+.66*(d-u)-6)+","+(f+6)+"M"+(u+.66*(d-u)+10)+","+(f-6)+"L"+(u+.66*(d-u)-2)+","+(f+6)),h){f=t.mother.x<t.father.x?t.mother.y:t.father.y,a=t.mother.x<t.father.x?t.father.y:t.mother.y;let e=3;if(Math.abs(f-a)>.1)return"M"+u+","+f+"L"+d+","+a+"M"+u+","+(f-e)+"L"+d+","+(a-e);return"M"+u+","+f+_+"L"+d+","+f+"M"+u+","+(f-e)+(p?v(p,r,f,a,o,e):"")+"L"+d+","+(f-e)+y}return"M"+u+","+f+_+"L"+d+","+f+y})),o.selectAll(".link").data(c.links(_.descendants())).enter().filter((function(t){return e.DEBUG||void 0===t.target.data.noparents&&null!==t.source.parent&&!t.target.data.hidden})).insert("path","g").attr("fill","none").attr("stroke-width",(function(t,n){return void 0!==t.target.data.noparents||null===t.source.parent||t.target.data.hidden?1:e.DEBUG?2:1})).attr("stroke",(function(t,e){return void 0!==t.target.data.noparents||null===t.source.parent||t.target.data.hidden?"pink":"#000"})).attr("stroke-dasharray",(function(t,n){if(!t.target.data.adopted_in)return null;let a=Math.abs(t.source.y-(t.source.y+t.target.y)/2),r=[a,0,Math.abs(t.source.x-t.target.x),0];i.Cz(e.dataset,t.target.data).length>=1&&(a*=3);for(let t=0;t<a;t+=10)I.merge(r,[5,5]);return r})).attr("shape-rendering",(function(t,e){return t.target.data.mztwin||t.target.data.dztwin?"geometricPrecision":"auto"})).attr("d",(function(t,n){if(t.target.data.mztwin||t.target.data.dztwin){let n=i.Cz(e.dataset,t.target.data);if(n.length>=1){let a=0,r=t.target.x,o=t.target.x;for(let t=0;t<n.length;t++){let e=i.Lw(m,n[t].name).x;r>e&&(r=e),o<e&&(o=e),a+=e}let s=(t.target.x+a)/(n.length+1),l=(t.source.y+t.target.y)/2,h="";if(r===t.target.x&&t.target.data.mztwin){let n=(s+t.target.x)/2,i=(l+(t.target.y-e.symbol_size/2))/2;h="M"+n+","+i+"L"+(s+(s-n))+" "+i}return"M"+t.source.x+","+t.source.y+"V"+l+"H"+s+"L"+t.target.x+" "+(t.target.y-e.symbol_size/2)+h}}if(t.source.data.mother){let e=i.Lw(m,t.source.data.mother.name),n=i.Lw(m,t.source.data.father.name);if(e.depth!==n.depth)return"M"+t.source.x+","+(e.y+n.y)/2+"H"+t.target.x+"V"+t.target.y}return"M"+t.source.x+","+t.source.y+"V"+(t.source.y+t.target.y)/2+"H"+t.target.x+"V"+t.target.y}));let b=i.Kz(e.dataset);if(void 0!==b){let t=i.Lw(m,e.dataset[b].name),n="triangle"+i.YO(3);o.append("svg:defs").append("svg:marker").attr("id",n).attr("refX",6).attr("refY",6).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d","M 0 0 12 6 0 12 3 6").style("fill","black"),o.append("line").attr("x1",t.x-e.symbol_size/.7).attr("y1",t.y+e.symbol_size/1.4).attr("x2",t.x-e.symbol_size/1.4).attr("y2",t.y+e.symbol_size/4).attr("stroke-width",1).attr("stroke","black").attr("marker-end","url(#"+n+")")}return s(e,r),e}function L(t){return console.error(t),new Error(t)}function C(t){if(t.validate){if("function"==typeof t.validate)return t.DEBUG&&console.log("CALLING CONFIGURED VALIDATION FUNCTION"),t.validate.call(this,t);let e,n=[],a=[];for(let r=0;r<t.dataset.length;r++){if(!r.hidden&&(t.dataset[r].mother||t.dataset[r].father)){e=t.dataset[r].display_name,e||(e="unnamed"),e+=" (IndivID: "+t.dataset[r].name+")";let n=t.dataset[r].mother,a=t.dataset[r].father;if(!n||!a)throw L("Missing parent for "+e);let o=i.qj(t.dataset,n),s=i.qj(t.dataset,a);if(-1===o)throw L("The mother (IndivID: "+n+") of family member "+e+" is missing from the pedigree.");if(-1===s)throw L("The father (IndivID: "+a+") of family member "+e+" is missing from the pedigree.");if("F"!==t.dataset[o].sex)throw L("The mother of family member "+e+" is not specified as female. All mothers in the pedigree must have sex specified as 'F'.");if("M"!==t.dataset[s].sex)throw L("The father of family member "+e+" is not specified as male. All fathers in the pedigree must have sex specified as 'M'.")}if(!t.dataset[r].name)throw L(e+" has no IndivID.");if(I.inArray(t.dataset[r].name,n)>-1)throw L("IndivID for family member "+e+" is not unique.");n.push(t.dataset[r].name),-1===I.inArray(t.dataset[r].famid,a)&&t.dataset[r].famid&&a.push(t.dataset[r].famid)}if(a.length>1)throw L("More than one family found: "+a.join(", ")+".");let r=i.py(t.dataset);r.length>0&&console.warn("individuals unconnected to pedigree ",r)}}function q(t,e,n,i){return"M"+(t+n)+","+e+"L"+t+" "+e+"L"+t+" "+(e+1.28*i.symbol_size)+"L"+t+" "+(e+1.28*i.symbol_size)+"L"+(t+n)+","+(e+1.28*i.symbol_size)}function U(t,e){let n,a,r=D[t.targetDiv],o=i.xH(r);if("name"in e){if(!("mother"in(e=i.Lw(o,e.name)).data))return null;n=i.Lw(o,e.data.mother),a=i.Lw(o,e.data.father)}else n=e.mother,a=e.father;let s=n.x<a.x?n.x:a.x,l=n.x<a.x?a.x:n.x,h=n.y,c=I.map(o,(function(t,e){return!t.data.hidden&&t.data.name!==n.data.name&&t.data.name!==a.data.name&&t.y==h&&t.x>s&&t.x<l?t.x:null}));return c.length>0?c:null}function P(t){return{width:f()?window.innerWidth:t.width,height:f()?window.innerHeight:t.height}}function Y(t){let e=P(t),n=0,a={};for(let e=0;e<t.dataset.length;e++){let r=i.hh(t.dataset,t.dataset[e].name),o=i.nI(t.dataset,t.dataset[e]),s=1+(o.length>0?.55+.25*o.length:0)+(t.dataset[e].father?.25:0);r in a?a[r]+=s:a[r]=s,a[r]>n&&(n=a[r])}let r=Object.keys(a).length*t.symbol_size*3.5;return{width:e.width-t.symbol_size>n*t.symbol_size*1.65?e.width-t.symbol_size:n*t.symbol_size*1.65,height:e.height-t.symbol_size>r?e.height-t.symbol_size:r}}function R(t){I("#"+t.targetDiv).empty(),a.k8(t);try{Z(t)}catch(t){throw console.error(t),t}try{templates.update(t)}catch(t){}}function j(t,e,n,a,r){if(r&&-1===I.inArray(r,["mztwin","dztwin"]))return new Error("INVALID TWIN TYPE SET: "+r);void 0===a&&(a=1);let o,s,l,h=i.nI(t,e);if(0===h.length){let n=H(t,e,"F"===e.sex?"M":"F","F"===e.sex);n.noparents=!0,o=n.name,s=i.qj(t,e.name)+1}else{let n=h[0];o=n.father===e.name?n.mother:n.father,s=i.qj(t,n.name)}r&&(l=G(t,r));let c=[];for(let h=0;h<a;h++){let a={name:i.YO(4),sex:n,mother:"F"===e.sex?e.name:o,father:"F"===e.sex?o:e.name};t.splice(s,0,a),r&&(a[r]=l),c.push(a)}return c}function H(t,e,n,a,r){if(r&&-1===I.inArray(r,["mztwin","dztwin"]))return new Error("INVALID TWIN TYPE SET: "+r);let o={name:i.YO(4),sex:n};e.top_level?o.top_level=!0:(o.mother=e.mother,o.father=e.father);let s=i.qj(t,e.name);return r&&function(t,e,n,i){if(!e[i]&&(e[i]=G(t,i),!e[i]))return!1;n[i]=e[i],e.yob&&(n.yob=e.yob);!e.age||0!=e.status&&e.status||(n.age=e.age)}(t,t[s],o,r),a?s>0&&s--:s++,t.splice(s,0,o),o}function G(t,e){let n=[1,2,3,4,5,6,7,8,9,"A"];for(let i=0;i<t.length;i++)if(t[i][e]){let a=n.indexOf(t[i][e]);a>-1&&n.splice(a,1)}if(n.length>0)return n[0]}function V(t,e){if(!e.mztwin&&!e.dztwin)return;let n=e.mztwin?"mztwin":"dztwin";for(let i=0;i<t.length;i++){let a=t[i];a[n]&&e[n]==a[n]&&a.name!==e.name&&("mztwin"===n&&(a.sex=e.sex),e.yob&&(a.yob=e.yob),!e.age||0!=e.status&&e.status||(a.age=e.age))}}function X(t,e,n){let a,r,o,s,l=D[t.targetDiv],h=i.xH(l),c=i.Lw(h,n),u=c.data,d=c.depth,f=-101,p=i.nI(e,u);if(p.length>0&&(o=p[0].mother==u.name?p[0].father:p[0].mother,f=i.Lw(h,o).data.id),1==d)for(a={name:i.YO(4),sex:"F",top_level:!0},r={name:i.YO(4),sex:"M",top_level:!0},e.splice(0,0,a),e.splice(0,0,r),s=0;s<e.length;s++)e[s].top_level&&e[s].name!==a.name&&e[s].name!==r.name&&(delete e[s].top_level,e[s].noparents=!0,e[s].mother=a.name,e[s].father=r.name);else{let n=i.Lw(h,c.data.mother),o=i.Lw(h,c.data.father),l=i.Dc(e,u),d=1e4,p=c.data.id;for(s=0;s<l.length;s++){let t=i.Lw(h,l[s].name).data.id;t<d&&t>c.data.id&&(d=t),t<p&&(p=t)}let _,m=p>=c.data.id||f==p&&d<1e4;t.DEBUG&&console.log("lid="+p+" rid="+d+" nid="+c.data.id+" ADD_LHS="+m),_=!m&&o.data.id>n.data.id||m&&o.data.id<n.data.id?i.qj(e,u.father):i.qj(e,u.mother);let y=e[_];r=H(e,y,"M",m),a=H(e,y,"F",m);let g=i.qj(e,r.name),x=i.qj(e,a.name);if(g>x){let t=e[g];e[g]=e[x],e[x]=t}let v=i.d$(e,u),b=c.data.id;for(s=0;s<v.length;s++){let n=i.Lw(h,v[s].name).data.id;if(t.DEBUG&&console.log("ORPHAN="+s+" "+v[s].name+" "+(b<n&&n<d)+" nid="+b+" oid="+n+" rid="+d),(m||b<n)&&n<d){let t=i.qj(e,v[s].name);e[t].mother=a.name,e[t].father=r.name}}}2==d?(a.top_level=!0,r.top_level=!0):d>2&&(a.noparents=!0,r.noparents=!0);let _=i.qj(e,u.name);if(e[_].mother=a.name,e[_].father=r.name,delete e[_].noparents,"parent_node"in u){let t=e[i.qj(e,o)];"noparents"in t&&(t.mother=a.name,t.father=r.name)}}function K(t,e,n){let a=D[t.targetDiv],r=i.xH(a),o=i.Lw(r,n),s=H(e,o.data,"F"===o.data.sex?"M":"F","F"===o.data.sex);s.noparents=!0;let l={name:i.YO(4),sex:"M"};l.mother="F"===o.data.sex?o.data.name:s.name,l.father="F"===o.data.sex?s.name:o.data.name;let h=i.qj(e,o.data.name)+2;e.splice(h,0,l)}function W(t,e,n){let a,r,o=i.Ec(i.xH(t),e.depth,n);for(let t=0;t<o.length;t++)o[t].x<e.x&&(a=o[t]),!r&&o[t].x>e.x&&(r=o[t]);return[a,r]}function J(t,e,n,a){let r,o,s,l=D[n.targetDiv],h=i.xH(l),c=[];if(void 0===e.id){let t=i.Lw(h,e.name);void 0!==t&&(e=t.data)}if(e.parent_node)for(r=0;r<e.parent_node.length;r++){let n=e.parent_node[r],a=[i.Lw(t,n.mother.name),i.Lw(t,n.father.name)];for(o=0;o<a.length;o++)(a[o].name===e.name||void 0!==a[o].noparents||a[o].top_level)&&(t.splice(i.qj(t,a[o].name),1),c.push(a[o]));let s=n.children,u=I.map(s,(function(t,e){return t.name}));for(o=0;o<s.length;o++){let e=i.Lw(t,s[o].name);if(e){e.noparents=!0;let n,a=i.UQ(t,e);if(a.length>0&&(n=i.Lw(t,a[0])),n&&n.mother!==e.mother)e.mother=n.mother,e.father=n.father;else if(n){let t=W(l,i.Lw(h,e.name),u);e.mother=t[0]?t[0].data.mother:t[1]?t[1].data.mother:null,e.father=t[0]?t[0].data.father:t[1]?t[1].data.father:null}else t.splice(i.qj(t,e.name),1)}}}else t.splice(i.qj(t,e.name),1);for(console.log(c),r=0;r<c.length;r++){let e=c[r],n=i.Dc(t,e);if(console.log("DEL",e.name,n),n.length<1){console.log("del sibs",e.name,n);let a=i.Lw(h,e.name).ancestors();for(o=0;o<a.length;o++)console.log(a[r]),a[o].data.mother&&(console.log("DELETE ",a[o].data.mother,a[o].data.father),t.splice(i.qj(t,a[o].data.mother.name),1),t.splice(i.qj(t,a[o].data.father.name),1))}}!function(t){let e=["mztwin","dztwin"];for(let n=0;n<t.length;n++)for(let i=0;i<e.length;i++){let a=e[i];if(t[n][a]){let e=0;for(let i=0;i<t.length;i++)t[i][a]==t[n][a]&&e++;e<2&&delete t[n][[a]]}}}(t);try{let e=I.extend({},n);e.dataset=i.KY(t),C(e),s=i.py(t)}catch(t){throw i.sY("Warning","Deletion of this pedigree member is disallowed."),t}return s.length>0&&0===i.py(n.dataset).length?(console.error("individuals unconnected to pedigree ",s),void i.sY("Warning","Deleting this will split the pedigree. Continue?",a,n,t)):(a&&a(n,t),t)}},91843:(t,e,n)=>{"use strict";n.d(e,{w1:()=>a,un:()=>r,KY:()=>o,UY:()=>s,sY:()=>l,YO:()=>h,fX:()=>c,IL:()=>f,UQ:()=>m,py:()=>y,Kz:()=>g,Dc:()=>v,Cz:()=>b,d$:()=>w,nI:()=>z,hh:()=>k,qj:()=>T,Ec:()=>M,Yc:()=>E,_L:()=>N,xH:()=>O,e3:()=>S,Lw:()=>I,Tx:()=>F});n(85516),n(56327);var i=n(6939);function a(){let t=navigator.userAgent;return t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1}function r(){return navigator.userAgent.match(/Edge/g)}function o(t){t[0].id&&t.sort((function(t,e){return t.id&&e.id?t.id>e.id?1:e.id>t.id?-1:0:0}));let e=["id","parent_node"],n=[];for(let i=0;i<t.length;i++){let a={};for(let n in t[i])-1==e.indexOf(n)&&(a[n]=t[i][n]);n.push(a)}return n}function s(t,e){let n=!1;return e&&i.each(e,(function(e,i){if(0===e.indexOf(t+"_")||e===t)return n=!0,n})),n}function l(t,e,n,i,a){n?!0===confirm(e)&&n(i,a):alert(e)}function h(t){let e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}function c(t,e,n,a,r){void 0===e.children&&(e.children=x(t.dataset,e)),void 0===a&&(a=[],r=1);let o=O(n),s=[];return i.each(e.children,(function(e,n){i.each(t.dataset,(function(e,i){if((n.name===i.mother||n.name===i.father)&&void 0===n.id){let e=I(o,i.mother),n=I(o,i.father);e=void 0!==e?e:I(t.dataset,i.mother),n=void 0!==n?n:I(t.dataset,i.father),function(t,e,n){for(let i=0;i<t.length;i++)if(t[i].mother===e&&t[i].father===n)return!0;return!1}(s,e,n)||s.push({mother:e,father:n})}}))})),i.merge(a,s),i.each(s,(function(n,i){let a=i.mother,s=i.father;a.children=[];let l={name:h(4),hidden:!0,parent:null,father:s,mother:a,children:x(t.dataset,a,s)},c=T(t.dataset,a.name),f=T(t.dataset,s.name);"id"in s||"id"in a||(r=d(e.children,r));let p=function(t,e,n){let i=e,a=n;for(;"mother"in t[i]&&"mother"in t[a]&&!("noparents"in t[i])&&!("noparents"in t[a]);)i=T(t,t[i].mother),a=T(t,t[a].mother);return{midx:i,fidx:a}}(t.dataset,c,f);p.fidx<p.midx?(s.id=r++,l.id=r++,a.id=r++):(a.id=r++,l.id=r++,s.id=r++),r=u(a,l,r,o,t),r=u(s,l,r,o,t),e.children.push(l)})),r=d(e.children,r),i.each(e.children,(function(e,i){r=c(t,i,n,a,r)[1]})),[a,r]}function u(t,e,n,i,a){if("parent_node"in t?t.parent_node.push(e):t.parent_node=[e],t.mztwin||t.dztwins){let e=b(a.dataset,t);for(let t=0;t<e.length;t++){let a=I(i,e[t].name);a&&(a.id=n++)}}return n}function d(t,e){return t.sort((function(t,e){return t.mztwin&&e.mztwin&&t.mztwin==e.mztwin||t.dztwin&&e.dztwin&&t.dztwin==e.dztwin?0:t.mztwin||e.mztwin||t.dztwin||e.dztwin?1:0})),i.each(t,(function(t,n){void 0===n.id&&(n.id=e++)})),e}function f(t){return void 0!==i(t).attr("proband")&&!1!==i(t).attr("proband")}function p(t,e){for(let n=0;n<e.length;n++)-1==i.inArray(e[n],t)&&t.push(e[n])}function _(t,e,n){if(-1==i.inArray(e.name,t))return;p(t,m(n,e));let a=z(n,e);i.each(a,(function(e,a){-1==i.inArray(a.name,t)&&(t.push(a.name),p(t,m(n,a)))}))}function m(t,e){let n=[];for(let a=0;a<t.length;a++){let r=t[a];e.name===r.mother&&-1==i.inArray(r.father,n)?n.push(r.father):e.name===r.father&&-1==i.inArray(r.mother,n)&&n.push(r.mother)}return n}function y(t){let e=t[g(t)];if(!e){if(console.warn("No target defined"),0==t.length)throw"empty pedigree data set";e=t[0]}let n=[e.name],a=!0,r=0;for(;a&&r<200;){r++;let o=n.length;i.each(t,(function(a,r){if(-1!=i.inArray(r.name,n)){let a=m(t,r),o=r.name===e.name||!r.noparents;for(let e=0;e<a.length;e++)I(t,a[e]).noparents||(o=!0);o&&(r.mother&&-1==i.inArray(r.mother,n)&&n.push(r.mother),r.father&&-1==i.inArray(r.father,n)&&n.push(r.father))}else!r.noparents&&(r.mother&&-1!=i.inArray(r.mother,n)||r.father&&-1!=i.inArray(r.father,n))&&n.push(r.name);_(n,r,t)})),a=o!=n.length}let o=i.map(t,(function(t,e){return t.name}));return i.map(o,(function(t,e){return-1==i.inArray(t,n)?t:null}))}function g(t){let e;return i.each(t,(function(t,n){if(f(n))return e=t,e})),e}function x(t,e,n){let a=[],r=[];return"F"===e.sex&&i.each(t,(function(t,o){e.name===o.mother&&(n&&n.name!=o.father||-1===i.inArray(o.name,r)&&(a.push(o),r.push(o.name)))})),a}function v(t,e,n){return i.map(t,(function(t,i){return t.name===e.name||"noparents"in t||!t.mother||t.mother!==e.mother||t.father!==e.father||n&&t.sex!=n?null:t}))}function b(t,e){let n=function(t,e,n){return void 0===e||!e.mother||e.noparents?[]:i.map(t,(function(t,i){return t.name===e.name||"noparents"in t||!t.mother||t.mother!==e.mother||t.father!==e.father||n&&t.sex!=n?null:t}))}(t,e),a=e.mztwin?"mztwin":"dztwin";return i.map(n,(function(t,n){return t.name!==e.name&&t[a]==e[a]?t:null}))}function w(t,e){return i.map(t,(function(t,n){return t.name!==e.name&&"noparents"in t&&t.mother===e.mother&&t.father===e.father?t:null}))}function z(t,e,n){return i.map(t,(function(t,i){return"noparents"in t||t.mother!==e.name&&t.father!==e.name||n&&t.sex!==n?null:t}))}function k(t,e){let n=T(t,e),i=1;for(;n>=0&&("mother"in t[n]||t[n].top_level);)n=T(t,t[n].mother),i++;return i}function T(t,e){let n=-1;return i.each(t,(function(t,i){if(e===i.name)return n=t,n})),n}function M(t,e,n){return i.map(t,(function(t,a){return t.depth!=e||t.data.hidden||-1!=i.inArray(t.data.name,n)?null:t})).sort((function(t,e){return t.x-e.x}))}function E(t,e){let n=[];for(let i=0;i<e.length;i++)n.push({mother:I(t,e[i].mother.name),father:I(t,e[i].father.name)});return n}function A(t,e){let n=[];return function e(i){i.data&&(i=i.data),"mother"in i&&"father"in i&&!("noparents"in i)&&(e(I(t,i.mother)),e(I(t,i.father))),n.push(i)}(e),n}function N(t,e,n){if(t.depth!==e.depth)return!0;let a=A(n.dataset,t),r=A(n.dataset,e),o=i.map(a,(function(t,e){return t.name})),s=i.map(r,(function(t,e){return t.name})),l=!1;return i.each(o,(function(t,e){if(-1!==i.inArray(e,s))return l=!0,!1})),l}function O(t){let e=[];return function t(n){n.children&&n.children.forEach(t),e.push(n)}(t),e}function S(t,e,n){function a(r){if(r.children&&(r.children.forEach(a),void 0!==r.data.father)){let a=I(n,r.data.father.name),o=I(n,r.data.mother.name),s=(a.x+o.x)/2;if(B(t,e.descendants(),s,r.depth,[r.data.name]))(r.x<a.x&&r.x<o.x||r.x>a.x&&r.x>o.x)&&(r.x=s);else{r.x=s;let n=r.x-s;if(2==r.children.length&&(r.children[0].data.hidden||r.children[1].data.hidden)){if(!r.children[0].data.hidden||!r.children[1].data.hidden){let n=r.children[0].data.hidden?r.children[1]:r.children[0],i=r.children[0].data.hidden?r.children[0]:r.children[1];(n.x<i.x&&s<i.x||n.x>i.x&&s>i.x)&&!B(t,e.descendants(),s,n.depth,[n.data.name])&&(n.x=s)}}else if(1!=r.children.length||r.children[0].data.hidden){if(0!==n&&!function(t,e,n,a){let r=e.descendants(),o=i.map(r,(function(t,e){return t.data.name})),s=a.descendants();for(let i=0;i<r.length;i++){let a=r[i];if(e.data.name!==a.data.name){if(B(t,s,a.x-n,a.depth,o))return!0}}return!1}(t,r,n,e))if(1==r.children.length)r.children[0].x=s;else{let e=r.descendants();t.DEBUG&&console.log("ADJUSTING "+r.data.name+" NO. DESCENDANTS "+e.length+" diff="+n);for(let t=0;t<e.length;t++)r.data.name!==e[t].data.name&&(e[t].x-=n)}}else B(t,e.descendants(),s,r.children[0].depth,[r.children[0].data.name])||(r.children[0].x=s)}}}a(e),a(e)}function B(t,e,n,a,r){for(let o=0;o<e.length;o++)if(a==e[o].depth&&-1==i.inArray(e[o].data.name,r)&&Math.abs(n-e[o].x)<1.15*t.symbol_size)return!0;return!1}function I(t,e){for(let n=0;n<t.length;n++){if(t[n].data&&e===t[n].data.name)return t[n];if(e===t[n].name)return t[n]}}function F(t){let e;i("#pedigree_data").remove(),i("body").append("<div id='pedigree_data'></div>");for(let n=0;n<t.dataset.length;n++){let a="<div class='row'><strong class='col-md-1 text-right'>"+t.dataset[n].name+"</strong><div class='col-md-11'>";for(e in t.dataset[n])"name"!==e&&("parent"===e?a+="<span>"+e+":"+t.dataset[n][e].name+"; </span>":"children"===e?void 0!==t.dataset[n][e][0]&&(a+="<span>"+e+":"+t.dataset[n][e][0].name+"; </span>"):a+="<span>"+e+":"+t.dataset[n][e]+"; </span>");i("#pedigree_data").append(a+"</div></div>")}for(e in i("#pedigree_data").append("<br /><br />"),t)"dataset"!==e&&i("#pedigree_data").append("<span>"+e+":"+t[e]+"; </span>")}},18063:function(t,e,n){!function(t,e){"use strict";function n(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var i=n(e);function a(t,e){return a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},a(t,e)}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}var o=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=[]),t.length!==e.length||t.some((function(t,n){return!Object.is(t,e[n])}))},s={error:null},l=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).state=s,e.updatedWithError=!1,e.resetErrorBoundary=function(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];null==e.props.onReset||(t=e.props).onReset.apply(t,i),e.reset()},e}r(e,t),e.getDerivedStateFromError=function(t){return{error:t}};var n=e.prototype;return n.reset=function(){this.updatedWithError=!1,this.setState(s)},n.componentDidCatch=function(t,e){var n,i;null==(n=(i=this.props).onError)||n.call(i,t,e)},n.componentDidMount=function(){null!==this.state.error&&(this.updatedWithError=!0)},n.componentDidUpdate=function(t){var e,n,i=this.state.error,a=this.props.resetKeys;null===i||this.updatedWithError?null!==i&&o(t.resetKeys,a)&&(null==(e=(n=this.props).onResetKeysChange)||e.call(n,t.resetKeys,a),this.reset()):this.updatedWithError=!0},n.render=function(){var t=this.state.error,e=this.props,n=e.fallbackRender,a=e.FallbackComponent,r=e.fallback;if(null!==t){var o={error:t,resetErrorBoundary:this.resetErrorBoundary};if(i.isValidElement(r))return r;if("function"==typeof n)return n(o);if(a)return i.createElement(a,o);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},e}(i.Component);function h(t,e){var n=function(n){return i.createElement(l,e,i.createElement(t,n))},a=t.displayName||t.name||"Unknown";return n.displayName="withErrorBoundary("+a+")",n}function c(t){var e=i.useState(null),n=e[0],a=e[1];if(null!=t)throw t;if(null!=n)throw n;return a}t.ErrorBoundary=l,t.useErrorHandler=c,t.withErrorBoundary=h,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(92437))}}]);